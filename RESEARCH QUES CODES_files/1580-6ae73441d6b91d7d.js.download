"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1580],{57930:function(e,t,n){var i=n(97458),l=n(40853),r=n(52983),s=n(71485),a=n(82835),o=n(33658),c=n(68007),d=n(5993),u=n(34957),m=n(80937),p=n(45308),h=(n(51272),n(46696)),x=(n(45201),n(92497)),v=n(10107),g=n(60971),j=n(51865),b=n.n(j);let f=r.memo(e=>{let{relatedQueries:t,isPending:n,onClick:j,show:f,isReadonly:y=!1,title:k,existingFrontendContextUUID:_,defaultQueries:w,useExperimentalClickableUi:S,optionalArticleParams:C}=e,{trackEvent:T}=(0,o.h)(),N=(0,a.useRouter)(),E=(0,r.useMemo)(()=>[...null!=w?w:[],...null!=t?t:[]],[w,t]),U=(0,s.useTranslations)("search.threadEntry"),P=c.DEFAULT_RELATED_QUERY_TRANS_KEYS.map(e=>U(e)),Z=(0,r.useCallback)(e=>{var t;let n=(0,h.Mp)();j({rawQuery:e,fork:y,collection:null,isRelatedQuery:!0,isDefaultRelatedQuery:P.includes(e),newFrontendContextUUID:y?n:null,existingFrontendContextUUID:y?null:_,promptSource:"related",querySource:null!==(t=null==C?void 0:C.querySource)&&void 0!==t?t:"related"}),y&&N.push("/search?q=pending&newFrontendContextUUID=".concat(n),"/search",{shallow:!0}),T("click related query",{query:e,...C})},[y,C,T,j,P,_,N]);return f?(0,i.jsx)(d.Z,{title:k,titleIcon:u.Oq,titleAccessory:void 0,children:n?(0,i.jsx)(x.Z,{divider:!0,size:"small",blockCount:3,noLines:!0}):E.length?(0,i.jsx)(v.ZP,{className:b()("divide-y border-t"),children:E.map((e,t)=>S?(0,i.jsxs)("div",{className:"group flex cursor-pointer items-center gap-sm py-sm",onClick:()=>Z(e),children:[(0,i.jsx)(g.Z,{color:"super",variant:"baseSemi",className:" flex-none transition-all duration-300",children:(0,i.jsx)(l.G,{fixedWidth:!0,icon:p.Kt})}),(0,i.jsx)(g.Z,{variant:"baseSemi",className:"transition-all duration-300  md:group-hover:text-super md:dark:group-hover:text-superDark",children:e})]},t):(0,i.jsxs)("div",{className:"group flex cursor-pointer items-center justify-between py-sm",onClick:()=>Z(e),children:[(0,i.jsx)(g.Z,{variant:"baseSemi",className:"transition-all duration-300  md:group-hover:text-super md:dark:group-hover:text-superDark",children:e}),(0,i.jsx)(g.Z,{color:"super",variant:"baseSemi",className:"ml-sm flex-none transition-all duration-300",children:(0,i.jsx)(l.G,{fixedWidth:!0,icon:m.r8})})]},t))}):null}):null});t.Z=f},68007:function(e,t,n){n.r(t),n.d(t,{DEFAULT_RELATED_QUERY_TRANS_KEYS:function(){return tJ},ThreadContent:function(){return tY}});var i=n(97458),l=n(68493),r=n(52983),s=n(71485),a=n(2464),o=n.n(a),c=n(40853),d=n(98882),u=n(97535);let m=r.memo(e=>{let{prompt:t,step:n,onUpdate:l,isMobileStyle:r,isMobileUserAgent:s}=e;return(0,i.jsx)(d.Z,{isMobileStyle:r,isMobileUserAgent:s,autoFocus:!0,maxLength:u.fn,placeholder:t.content.placeholder,label:t.content.description,value:n.content.text,onChange:e=>{l({uuid:n.uuid,type:"USER_TEXT",content:{text:e.target.value}})}})});var p=n(4763),h=n(68952),x=n(60971),v=n(15065);let g=r.memo(e=>{let{prompt:t,step:n,onUpdate:l}=e,s=(0,r.useMemo)(()=>new Set(n.content.options.map(e=>e.id)),[n]);return(0,i.jsxs)("div",{children:[(0,i.jsx)(x.Z,{variant:"smallBold",className:"mb-sm",children:t.content.description}),(0,i.jsx)("div",{className:"flex flex-wrap gap-sm",children:t.content.options&&t.content.options.map(e=>(0,i.jsx)(v.Z,{pill:!0,noWrap:!1,size:"tiny",icon:s.has(e.id)?h.fV:p.di,variant:s.has(e.id)?"primary":"common",text:e.value,onClick:()=>{let t=[...n.content.options];s.has(e.id)?t.splice(t.findIndex(t=>t.id===e.id),1):t.push(e),l({uuid:n.uuid,type:"USER_CHECKBOX",content:{options:t}})}},e.id))})]})});var j=n(59842);let b=e=>{let{icon:t,name:n}=e;return(0,i.jsxs)(x.Z,{variant:"section-title",className:"flex items-center gap-x-sm",children:[(0,i.jsx)(c.G,{icon:t}),(0,i.jsx)("p",{children:n})]})};var f=n(15805),y=n(73936),k=n(10107),_=n(45201),w=n(51865),S=n.n(w),C=n(59815),T=n(35112);let N=e=>{let{children:t,icon:n,name:l,isOpen:r,handleOpenUpdater:a,isCollapsible:o=!1,stepCount:c}=e,[d,{height:u}]=(0,j.Z)(),m=(0,s.useTranslations)("threads.statusUpdater")("stepsCompleted",{count:c});return(0,i.jsx)("div",{children:(0,i.jsx)(k.ZP,{className:S()("rounded-lg border",{"cursor-pointer":!r}),bgHover:r?void 0:"offset",onClick:r?void 0:a,children:(0,i.jsx)(C.E.div,{animate:{height:u},transition:{type:"spring",bounce:.2,duration:.2},children:(0,i.jsxs)("div",{ref:d,className:"py-sm px-md",children:[(0,i.jsxs)("div",{className:"flex select-none items-center justify-between",children:[(0,i.jsx)(b,{icon:n,name:l}),(0,i.jsxs)("div",{className:"flex items-center gap-sm",children:[(0,i.jsx)(T.M,{children:!r&&(0,i.jsx)(C.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeOut",duration:.1},children:(0,i.jsx)(x.Z,{variant:"tiny",color:"light",children:m})})}),o&&(0,i.jsx)(_.Z,{pill:!0,onClick:a,size:"small",icon:r?y.mT:f.pt})]})]}),(0,i.jsx)("div",{children:(0,i.jsx)(T.M,{children:r&&(0,i.jsx)(C.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"pb-sm",transition:{ease:"easeOut",duration:.1},children:t})})})]})})})})};var E=n(20787),U=n(40009),P=n(66600),Z=n(4028),R=n(80794),M=n(71210),I=n(51899),z=n.n(I),D=n(70810);let O=e=>{let{steps:t,isMobileUserAgent:n,isMobileStyle:l,onBotStep:a,skipText:o,skip:d}=e,u=(0,s.useTranslations)("shared"),p=(0,r.useMemo)(()=>{var e,n;let i=t.filter(e=>"PROMPT_INPUT"===e.step_type),l=null===(n=i[i.length-1])||void 0===n?void 0:null===(e=n.content)||void 0===e?void 0:e.inputs;return null!=l?l:[]},[t]),[h,j]=(0,r.useState)(p.map(e=>{switch(null==e?void 0:e.type){case"PROMPT_TEXT":return{...e,type:"USER_TEXT",content:{text:""}};case"PROMPT_CHECKBOX":return{...e,type:"USER_CHECKBOX",content:{options:[]}};default:return{uuid:"",type:"USER_TEXT",content:{text:""}}}})),b=e=>{let t=[...h];t[h.findIndex(t=>t.uuid===e.uuid)]=e,j(t)},f=(0,r.useCallback)(()=>{a&&a({uuid:p[0].uuid,step_type:"USER_INPUT",content:[...h]})},[a,p,h]),y=(0,r.useCallback)(e=>{let n=e,i=t[t.length-1],l={uuid:(0,D.Z)(),step_type:"USER_SKIP",content:"PROMPT_INPUT"===i.step_type?h.map(e=>{switch(e.type){case"USER_TEXT":let t=n;return n="",{...e,type:"USER_TEXT",content:{text:t}};case"USER_CHECKBOX":return{...e,type:"USER_CHECKBOX",content:{options:[]}}}}):[]};a&&a(l)},[t,h,a]),w=(0,r.useMemo)(()=>z()(y,500,{leading:!0,trailing:!1}),[y]),S=(0,r.useCallback)(()=>{a({uuid:(0,D.Z)(),step_type:"USER_REGENERATE",content:[]})},[a]),C=(0,r.useMemo)(()=>z()(S,500,{leading:!0,trailing:!1}),[S]);(0,r.useEffect)(()=>{j(p.map(e=>{switch(null==e?void 0:e.type){case"PROMPT_TEXT":return{...e,type:"USER_TEXT",content:{text:""}};case"PROMPT_CHECKBOX":return{...e,type:"USER_CHECKBOX",content:{options:[]}};default:return{uuid:"",type:"USER_TEXT",content:{text:""}}}}))},[p]);let T=(0,r.useCallback)(e=>{(0,M.Wk)(e)&&!n&&f()},[f,n]),I=(0,r.useMemo)(()=>h.reduce((e,t)=>"USER_TEXT"===t.type?t.content.text.trim().length>0&&t.content.text.trim().length<2e3||e:"USER_CHECKBOX"===t.type&&t.content.options.length>0||e,!1),[h]);return(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&w("Skipped")};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),(0,i.jsxs)(k.ZP,{className:"relative",children:[(0,i.jsxs)(N,{isOpen:!0,isCollapsible:!1,icon:R.A6,name:"Pro Search",children:[(0,i.jsx)("div",{className:"mt-md space-y-md",onKeyDown:T,children:h.map((e,t)=>{switch(null==e?void 0:e.type){case"USER_TEXT":let r=[p[t]].filter(e=>"PROMPT_TEXT"===e.type)[0];return(0,i.jsx)(m,{isMobileStyle:l,isMobileUserAgent:n,prompt:r,step:e,onUpdate:b},e.uuid);case"USER_CHECKBOX":let s=[p[t]].filter(e=>"PROMPT_CHECKBOX"===e.type)[0];return(0,i.jsx)(g,{prompt:s,step:e,onUpdate:b},e.uuid)}})}),(0,i.jsx)("div",{className:"mt-md flex justify-end gap-sm ",children:(0,i.jsx)(v.Z,{pill:!0,variant:"primary",icon:P.Lh,text:u("send"),onClick:f,disabled:!I})}),(0,i.jsx)("div",{className:"absolute right-sm top-sm mt-xs",children:(0,i.jsx)(_.Z,{size:"small",pill:!0,variant:"common",icon:Z.a_,toolTip:"Rewrite these questions",onClick:C})})]}),(0,i.jsxs)(k.ZP,{className:"mt-md flex items-center justify-between gap-sm rounded-lg border p-md",children:[(0,i.jsxs)("div",{className:"items-small flex items-center gap-x-sm",children:[(0,i.jsx)(x.Z,{variant:"section-title",children:(0,i.jsx)(c.G,{icon:E.BD})}),(0,i.jsx)("div",{children:(0,i.jsx)(x.Z,{variant:"section-title",children:o})})]}),(0,i.jsx)(v.Z,{onClick:()=>w("Skipped"),text:d,pill:!0,icon:U.ir})]})]})};O.displayName="BotInput";var A=n(77088);let F=r.memo(e=>{let{isLoading:t,showAnimations:n,icon:l,title:r,description:s}=e;return(0,i.jsxs)("div",{className:S()({"animate-in fade-in duration-1000":n}),children:[(0,i.jsxs)(k.ZP,{className:"taco flex items-center gap-x-xs",children:[t?(0,i.jsx)("div",{className:S()({"animate-in zoom-in-50 duration-1000 ease-in-out":n}),children:(0,i.jsx)(x.Z,{variant:"smallBold",color:"super",children:(0,i.jsx)(c.G,{className:"animate-spin",fixedWidth:!0,icon:A.Dh})})}):(0,i.jsx)("div",{className:S()("rounded-full",{"animate-in zoom-in-50 duration-200 ease-in-out":n}),children:(0,i.jsx)(x.Z,{variant:"smallBold",children:l&&(0,i.jsx)(c.G,{fixedWidth:!0,icon:l})})}),(0,i.jsx)("div",{children:r&&(0,i.jsx)(x.Z,{children:r})})]}),s&&(0,i.jsx)(x.Z,{variant:"small",className:S()("grow",{"pt-sm":r}),children:s})]})});var L=n(89296),X=n(6435),q=n(65171),W=n(30333),H=n(46129),B=n(39041);let G=e=>{let{inFlight:t,showAnimations:n=!1,hasUserInput:l=!1,steps:a}=e,[o,c]=(0,r.useState)(l),[d,m]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),v=(0,s.useTranslations)("threads.statusUpdater"),g=(0,r.useCallback)(e=>{switch(e){case"wolfram":return v("searchingWolfram");case"news":return v("news");case"youtube":return v("youtube");case"image":return v("image");case"shopping":return v("shopping");case"map":return v("map");default:return v("searchingWeb")}},[v]),j=(0,r.useCallback)(()=>{c(!o)},[o]),b=null==a?void 0:a.find(e=>(null==e?void 0:e.step_type)==="FINAL");(0,r.useEffect)(()=>{!d&&p&&b&&(m(!0),setTimeout(()=>c(!1),u.Mg))},[a,b,d,p]),(0,r.useEffect)(()=>{t&&!p&&(h(!0),c(!0))},[t,p]);let f=(0,r.useMemo)(()=>null==a?void 0:a.filter(e=>(null==e?void 0:e.step_type)==="INITIAL_QUERY"||(null==e?void 0:e.step_type)==="SEARCH_WEB"||(null==e?void 0:e.step_type)==="SEARCH_RESULTS"||(null==e?void 0:e.step_type)==="ATTACHMENT"||(null==e?void 0:e.step_type)==="USER_REGENERATE"||(null==e?void 0:e.step_type)==="USER_INPUT"),[a]),y=(0,r.useMemo)(()=>null==f?void 0:f.map(e=>{var t,n,l,r,s;switch(null==e?void 0:e.step_type){case"INITIAL_QUERY":return{...e,title:v("understandingQuestion"),icon:W.wR,description:null};case"USER_INPUT":return{...e,title:v("readingResponse"),description:(0,i.jsx)("div",{className:"ml-md flex flex-wrap gap-xs pl-xs",children:e.content.map(e=>{var t;return"USER_TEXT"===e.type?e.content.text:null===(t=e.content.options)||void 0===t?void 0:t.map(e=>null==e?void 0:e.value)}).flat().filter(e=>null!=e&&""!=e).map((e,t)=>(0,i.jsx)(k.ZP,{variant:"offset",className:S()("inline-block rounded px-sm py-two animate-in fade-in duration-200"),children:(0,i.jsx)(x.Z,{className:"inline whitespace-pre-wrap",variant:"tiny",color:"light",children:e})},t))}),icon:q.wh};case"SEARCH_WEB":return{...e,title:g(null===(t=e.content.queries[0])||void 0===t?void 0:t.engine),description:(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"ml-md flex flex-wrap gap-xs pl-xs",children:e.content.queries.map((e,t)=>(0,i.jsx)(k.ZP,{variant:"offset",className:S()("inline-block rounded px-sm py-two animate-in fade-in duration-200"),children:(0,i.jsx)(x.Z,{className:"inline",variant:"tiny",color:"light",children:e.query})},t))})}),icon:H.faMagnifyingGlass};case"SEARCH_RESULTS":let a=(null===(l=e.content)||void 0===l?void 0:null===(n=l.web_results)||void 0===n?void 0:n.length)||0;return{...e,title:v("sources",{count:a}),description:null,icon:B.N6};case"ATTACHMENT":let o=(null===(s=e.content)||void 0===s?void 0:null===(r=s.attachments)||void 0===r?void 0:r.length)||0;return{...e,title:v("reading",{count:o}),description:null,icon:X.gM};case"USER_REGENERATE":return{...e,title:v("rewriting"),description:null,icon:Z.a_};case"PERSONALIZE":return{...e,title:v("rewritingProfile"),description:null,icon:L.bp};default:return{...e,title:null,description:null,icon:null}}}),[f,g,v]);if(null==a)return(0,i.jsx)(i.Fragment,{});let _=a.some(e=>(null==e?void 0:e.step_type)==="WIDGET_RESULTS"),w=(null==f?void 0:f.length)||0;return 0===w||_?null:(0,i.jsx)("div",{className:"mb-lg",children:(0,i.jsx)(N,{icon:R.A6,name:"Pro Search",isCollapsible:!0,isOpen:o,stepCount:w,handleOpenUpdater:j,children:(0,i.jsx)("div",{className:"mt-md space-y-sm",children:y.map((e,t)=>(0,i.jsx)(F,{isLoading:!b&&t===y.length-1,showAnimations:n&&!b&&t===y.length-1,...e},t))})})})};var Q=n(86530),K=n(31829),J=n(7323),Y=n(4342),V=n(95668),$=n(96712),ee=n(70403),et=n(33490),en=n(15690),ei=n(7811);let el={current_job:Q.HX,previous_job:en.cp,education:Y.Xf,location:ee.op,certificate:K.U,investor:et.OZ,skills:ei.kl,website:J.g4,language:V.BC,patent:$.X8};var er=n(62013),es=n(58726);let ea=e=>{let{children:t}=e;return(0,i.jsx)(k.ZP,{variant:"offset",className:"mb-md rounded-lg p-md",children:t})};ea.Title=e=>{let{title:t,subtitle:n,image_url:l,children:r}=e,{isMobileStyle:s}=(0,er.d)();return(0,i.jsxs)(k.ZP,{className:"mb-md flex w-full justify-between gap-sm border-b pb-md",children:[(0,i.jsxs)("div",{className:"flex grow items-center gap-md",children:[""!==l&&(0,i.jsx)("div",{className:"flex-none",children:(0,i.jsx)(es.Z,{imageClassName:"w-[45px] h-[45px] object-cover object-top",rounded:"md",src:l,alt:t,useNextImage:!1,includeLightBoxModal:!1})}),(0,i.jsxs)("div",{children:[(0,i.jsx)(x.Z,{variant:"section-title",children:t}),(0,i.jsx)(x.Z,{color:"light",variant:"small",children:n})]})]}),r]})},ea.Item=e=>{let{icon:t,name:n,value:l}=e;if(null!==n&&null!==l){let e=null;return null!=t&&(e=el[t]||null),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex w-[120px] gap-sm",children:[e&&(0,i.jsx)(x.Z,{variant:"smallBold",children:(0,i.jsx)(c.G,{fixedWidth:!0,icon:e})}),(0,i.jsx)(x.Z,{variant:"smallBold",children:n})]}),(0,i.jsx)(x.Z,{variant:"small",color:"light",children:l})]})}};var eo=n(1850);let ec=eo.z.object({object:eo.z.literal("TakoWidget"),data:eo.z.object({iframe:eo.z.string(),url:eo.z.string()})}),ed=eo.z.object({object:eo.z.literal("TimeWidget"),data:eo.z.object({time:eo.z.string(),date:eo.z.string(),location:eo.z.string()})}),eu=eo.z.object({object:eo.z.literal("CalculatorWidget"),data:eo.z.object({expression:eo.z.string(),result:eo.z.number()})}),em=eo.z.object({object:eo.z.literal("WeatherWidget"),current:eo.z.object({temp_c:eo.z.number().optional(),temp_f:eo.z.number().optional(),wind_mph:eo.z.number().optional(),wind_kph:eo.z.number().optional(),wind_dir:eo.z.string().optional(),pressure_mb:eo.z.number().optional(),pressure_in:eo.z.number().optional(),precip_mm:eo.z.number().optional(),precip_in:eo.z.number().optional(),humidity:eo.z.number().optional(),cloud:eo.z.number().optional(),condition:eo.z.object({text:eo.z.string(),icon:eo.z.string(),code:eo.z.string()}).optional()}),location:eo.z.object({name:eo.z.string().optional(),country:eo.z.string().optional(),tz_id:eo.z.string().optional(),localtime:eo.z.string().optional(),region:eo.z.string().optional(),is_usa:eo.z.union([eo.z.literal(1),eo.z.literal(0)]).optional()}),forecast:eo.z.array(eo.z.object({dow:eo.z.string().optional(),icon:eo.z.string().optional(),maxtemp_c:eo.z.number().optional(),maxtemp_f:eo.z.number().optional(),mintemp_c:eo.z.number().optional(),mintemp_f:eo.z.number().optional()}))}),ep=eo.z.discriminatedUnion("object",[em,ec,ed,eu]);var eh=n(92497),ex=n(94102);let ev=o()(()=>n.e(5819).then(n.bind(n,45819)).then(e=>e.WeatherWidget),{loadableGenerated:{webpack:()=>[45819]},loading:()=>(0,i.jsx)(eh.Z,{size:"large"})}),eg=o()(()=>n.e(2593).then(n.bind(n,82593)).then(e=>e.TimeWidget),{loadableGenerated:{webpack:()=>[82593]},loading:()=>(0,i.jsx)(eh.Z,{size:"small"})}),ej=o()(()=>n.e(1864).then(n.bind(n,91864)).then(e=>e.CalculatorWidget),{loadableGenerated:{webpack:()=>[91864]},loading:()=>(0,i.jsx)(eh.Z,{size:"small"})}),eb=o()(()=>n.e(3969).then(n.bind(n,83969)).then(e=>e.TakoWidget),{loadableGenerated:{webpack:()=>[83969]},loading:()=>(0,i.jsx)(eh.Z,{size:"large"})}),ef=e=>{let{widgetData:t}=e,n=ep.safeParse(t.meta_data);if(!n.success)return ex.Tb("Invalid widget data",{extra:{widgetData:t}}),null;let l=n.data,r=l.object;switch(r){case"WeatherWidget":return(0,i.jsx)(ea,{children:(0,i.jsx)(ev,{...l})});case"TimeWidget":return(0,i.jsx)(ea,{children:(0,i.jsx)(eg,{...l})});case"CalculatorWidget":return(0,i.jsx)(ea,{children:(0,i.jsx)(ej,{...l})});case"TakoWidget":return(0,i.jsx)(ea,{children:(0,i.jsx)(eb,{...l})});default:return ex.Tb(Error("No PanelComponent found for livePanelType: ".concat(r))),null}};var ey=n(82835),ek=n(56047),e_=n(54007),ew=n(45594),eS=n(43566),eC=n.n(eS),eT=n(86863);let eN=e=>e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&");var eE=n(74650);let eU=e=>{let{icon:t,name:n,value:l,entities:s,onEntityClick:a}=e,{inFlight:o}=(0,e_.a0)(),d=(null==s?void 0:s.length)>0,u=(0,r.useMemo)(()=>d?RegExp("(".concat(s.map(eN).join("|"),")"),"g"):null,[d,s]),m=(0,r.useMemo)(()=>l.split(u),[l,u]),p=(0,r.useCallback)(e=>{o||a(e)},[o,a]),h=S()("underline-thickness-thin underline-offset-sm cursor-pointer decoration-textOff/60 decoration-dotted hover:text-super hover:decoration-super dark:decoration-textOffDark/60 dark:hover:text-superDark dark:hover:decoration-superDark group transition-colors duration-200 ease-in-out",{underline:!o}),v=(0,r.useCallback)(e=>{let{content:t}=e,n=t.startsWith("http://")||t.startsWith("https://")?t:"https://".concat(t);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(eC(),{href:n,target:"_blank",rel:"noopener noreferrer",className:h,children:[t,(0,i.jsx)(x.Z,{className:"ml-xs inline",variant:"tiny",children:(0,i.jsx)(c.G,{className:"transition-colors duration-200 ease-in-out group-hover:text-super dark:group-hover:text-superDark",icon:eE.t3})})]})})},[h]),g=(0,r.useMemo)(()=>m.map(e=>d&&s.includes(e)?(0,i.jsx)("span",{className:h,onClick:()=>p(e),children:e},"".concat(e,"-").concat(Math.random())):(0,i.jsx)(eT.Z,{fallback:(0,i.jsx)(i.Fragment,{children:e}),children:(0,i.jsx)(ew.Z,{options:{render:v},children:e})},"".concat(e,"-").concat(Math.random()))),[m,d,s,h,v,p]);return(0,i.jsx)(ea.Item,{icon:t,name:n,value:g},n)};var eP=n(53812),eZ=n(62336),eR=n(46696);let eM=r.memo(e=>{let{knowledgePanelData:t,isReadonly:n,submit:l}=e,{title:s,subtitle:a,attributes:o,image_url:c}=null==t?void 0:t.meta_data,{trackEvent:d}=(0,ek.WS)(),{threadMetadata:u}=(0,e_.a0)(),m=u.frontendContextUUID,p=(0,ey.useRouter)(),[h,x]=(0,r.useState)(3),g=o.length,b=h===g,f=o.length>3,y=(0,r.useCallback)(()=>{d("click toggle on knowledge card",{newState:b?"collapsed":"expanded"}),x(e=>3===e?g:3)},[d,b,g]),[k,{height:_}]=(0,j.Z)(),w=(0,eR.Mp)(),S=(0,r.useCallback)(e=>{l({fork:n,rawQuery:e,collection:null,newFrontendContextUUID:n?w:null,existingFrontendContextUUID:n?null:m,promptSource:"user",querySource:"entity_link"}),n&&p.push("/search?q=pending&newFrontendContextUUID=".concat(w),"/search?",{shallow:!0})},[l,n,w,m,p]);return(0,r.useEffect)(()=>{d("entry panel shown",{})},[d]),(0,i.jsx)(C.E.div,{animate:_>0?{height:_}:{},transition:{type:"spring",bounce:.2,duration:.2},children:(0,i.jsxs)("div",{ref:k,children:[(0,i.jsx)("div",{className:"flex items-end justify-between",children:(0,i.jsx)(ea.Title,{title:s,subtitle:a,image_url:c,children:f&&(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)(v.Z,{variant:"common",text:b?"Less":"More",size:"tiny",pill:!0,onClick:y,icon:b?eZ.mT:eP.pt})})})}),(0,i.jsx)("div",{className:"grid grid-cols-[auto,1fr] gap-x-sm gap-y-sm md:gap-x-md",children:o.slice(0,h).map(e=>(0,i.jsx)(eU,{icon:e.icon,name:e.name,value:e.value,entities:e.key_entities,onEntityClick:S},e.name))})]})})}),eI=e=>{let{knowledgePanelData:t,isReadonly:n,submit:l}=e;return t?(0,i.jsx)(ea,{children:(0,i.jsx)(eM,{knowledgePanelData:t,submit:l,isReadonly:n})}):null},ez=e=>{let{data:t,submit:n,isReadonly:l}=e;return(0,i.jsx)(i.Fragment,{children:"is_widget"in t&&!0===t.is_widget?(0,i.jsx)(ef,{widgetData:t}):(0,i.jsx)(eI,{knowledgePanelData:t,submit:n,isReadonly:l})})};var eD=n(5993),eO=n(44557);let eA=()=>{let e=(0,s.useTranslations)("search.threadEntry");return(0,i.jsx)(k.ZP,{className:"mb-lg",children:(0,i.jsx)("div",{className:"mt-md",children:(0,i.jsx)(eD.Z,{title:e("sources"),titleIcon:eO.oJ,children:(0,i.jsx)("div",{className:S()("grid grid-cols-2 gap-sm md:grid-cols-4"),children:Array.from({length:4}).map((e,t)=>(0,i.jsx)(eh.Z,{noLines:!0},t))})})})})};var eF=n(55612),eL=n(79743),eX=n(43622),eq=n(24114),eW=n(89366),eH=n(98521),eB=n(84660),eG=n(11008),eQ=n(75029),eK=n(10017),eJ=n(62313);let eY=e=>{let{mediaItems:t,isDoneFetchingMedia:n,isStreaming:l,isReadOnly:s,showAnimations:a,entryTitle:o,isLastResult:c,entryUUID:d,frontendContextUUID:u}=e,[m,p]=(0,r.useState)(!1),[h,x]=(0,r.useState)(!1),{createLimit:v}=(0,eH.v)(),{isDark:g}=(0,eJ.v)(),j=(0,r.useMemo)(()=>t.filter(e=>"image"===e.medium).slice(0,4),[t]),b=(0,r.useMemo)(()=>t.filter(e=>"video"===e.medium),[t]),f=m||!n&&0===t.length;return(0,i.jsxs)(k.ZP,{className:S()("",{"animate-in fade-in duration-500 ease-out":a,"my-md":!0}),children:[(0,i.jsxs)("div",{className:"mb-sm grid grid-cols-1 gap-sm lg:grid-cols-2",children:[h&&(0,i.jsx)(eB.Z,{}),j.map((e,t)=>{let{url:n,name:l,image:r,thumbnail:s,dark_image_url:o,source:c}=e;return(0,i.jsx)(es.Z,{fill:!0,AIProps:{isAI:(0,eW.C)(c),AILabel:(0,eW.D)(c)},origin:{url:n.length>0?n:r,name:l},fadeIn:a,hasShadow:!0,useNextImage:!1,includeLightBoxModal:!0,imageClassName:"w-full cursor-zoom-in object-cover object-top min-h-[100px] h-full",maskClassName:"aspect-video w-full",alt:l,fallbackSrc:s,src:g&&o?o:r,fallback:null},"image"+t)}),b.length>0&&b.map((e,t)=>{let{url:n,name:l,thumbnail:r}=e;return(0,i.jsx)(eK.s,{url:n,title:l,thumbnail:r,variant:"preview"},String(t)+l)}),f&&(0,i.jsx)(eG.Z,{})]}),c&&!l&&!s&&(0,i.jsx)(eQ.Z,{entry:{entryUUID:d,entryTitle:o,frontendContextUUID:u,mediaItems:t},imagesLength:j.length,videosLength:b.length,createLimit:v,isDisabled:h,setIsLoadingGeneratedImage:x,setIsLoadingMediaItems:p})]})};var eV=n(40921),e$=n(6225);let e0=e=>{if(e instanceof Element){var t;if(((null===(t=e.getAttribute("class"))||void 0===t?void 0:t.split(" "))||[]).includes("citation"))return!0}return!1},e1=e=>{let t=[];if(e0(e))return[];if(e.childNodes.length>0)for(let n=0;n<e.childNodes.length;n++)t.push(...e1(e.childNodes[n]));else t.push(e);return t},e3=e=>{let t=e.cloneContents().childNodes,n=[],i="";return Array.from(t).forEach(e=>{n.push(...e1(e))}),n.map(e=>{i+=e.textContent}),i},e5=e=>{let{children:t,onClick:n,existingFrontendContextUUID:l,disabled:a,isReadonly:o}=e,c=(0,ey.useRouter)(),{getEppoStringVariation:d}=(0,eX.DQ)(),{trackEvent:u}=(0,ek.WS)(),[m,p]=(0,r.useState)(!0),h=(0,r.useCallback)(()=>{let e=(e=>{let t=e.getRangeAt(0),n=t.toString();return t&&(n=e3(t)),n.trim()})(window.getSelection()),t=(0,eR.Mp)();e&&(n({rawQuery:e,querySource:"thread_text_selection",fork:o,collection:null,isRelatedQuery:!1,isDefaultRelatedQuery:!1,newFrontendContextUUID:o?t:null,existingFrontendContextUUID:o?null:l,promptSource:"user"}),o&&c.push("/search?q=pending&newFrontendContextUUID=".concat(t),"/search",{shallow:!0}))},[n,l,c,o]),x=(0,r.useCallback)(e=>{if(!e)return;let t=(0,eq.mm)({setIfNotExists:!0}),n="ask-followup-highlight-popover"===d({key:t,flag:"ask-followup-highlight-popover-restart",subjectType:"visitor_id",subjectAttributes:{visitorId:t}});p(!n),n&&u("show thread highlight select popover",{})},[d,u]),v=(0,s.useTranslations)("askInput");return(0,i.jsx)(e$.B,{contentClass:"dark:fill-background fill-backgroundDark",disabled:a,hidePopover:m,handleOpenChange:x,popoverContent:(0,i.jsx)("div",{className:"flex items-center rounded bg-backgroundDark p-xs shadow-lg dark:bg-background",children:(0,i.jsx)(_.Z,{text:v("placeholderFollowUp"),variant:"common",size:"small",extraCSS:"hover:!bg-black !text-background hover:!text-background dark:!text-backgroundDark dark:hover:!text-backgroundDark dark:hover:!bg-offsetPlus",icon:eV.r8,onClick:h})}),children:t})};var e8=n(50578),e9=n(33658),e2=n(93040),e4=n(31928),e6=n(95330),e7=n(49568),te=n(66477),tt=n(74979);let tn=r.memo(e=>{var t,n,l,r;let{inFlight:a,showAnimations:o,webResults:c,entry:d,submit:u}=e,m=null!==(n=null==c?void 0:c.length)&&void 0!==n?n:0,p=!!(null==c?void 0:null===(t=c[0])||void 0===t?void 0:t.is_navigational),h=p?2:m>4?3:m,v=null!==(l=null==c?void 0:c.slice(0,h))&&void 0!==l?l:[],g=null!==(r=null==c?void 0:c.slice(h,void 0))&&void 0!==r?r:[],j=m-h,{trackEvent:b}=(0,ek.WS)(),{trackEvent:f}=(0,e9.h)(),y=(0,s.useTranslations)("search.threadEntry"),{openModal:_}=(0,e2.X)(),w=(0,e8.p)();return m>0?(0,i.jsx)(k.ZP,{className:"mb-lg",children:(0,i.jsx)("div",{className:"mt-md",children:(0,i.jsx)(eD.Z,{title:y("sources"),titleIcon:eO.oJ,titleAccessory:!1,children:(0,i.jsxs)("div",{className:S()("grid grid-cols-2 gap-sm",{"md:grid-cols-4":p||m>=4||0===m,"md:grid-cols-3":m>0&&m<4}),children:[v.map((e,t)=>p&&0===t?(0,i.jsx)("div",{className:"col-span-2",children:(0,i.jsx)(e4.r,{result:e,idx:t,inFlight:a,showAnimations:o,trackEvent:b},e.url)},e.url):(0,i.jsx)(e6.Z,{linkProps:{onClick(){b("click citation",{source:"hoverCard",citation_url:e.url})}},result:e,children:(0,i.jsx)(e7.Z,{result:e,idx:t,inFlight:a,showAnimations:o,trackEvent:b},e.url)},"".concat(e.url,"-").concat(e.timestamp))),m>h&&(0,i.jsxs)(k.ZP,{variant:"offset",bgHover:"offsetPlus",className:"flex h-full cursor-pointer flex-col justify-between rounded p-sm",onClick:()=>{f("click view sources button",{entryUUID:d.backend_uuid}),_("citationListModal",{webResults:c,entry:d,submit:w?u:void 0})},children:[(0,i.jsx)("div",{className:"flex flex-wrap items-center gap-sm",children:g.slice(0,6).map(e=>(0,i.jsx)(te.D,{domain:(0,tt.C$)(e.url)},e.url))}),(0,i.jsx)(x.Z,{variant:"tiny",color:"light",children:y("viewMore",{count:j})})]})]})})})}):null});tn.displayName="CitationGrid";var ti=n(57930),tl=n(78931),tr=n(82129),ts=n(90452),ta=n(1537),to=n(36938),tc=n(79650),td=n(16569),tu=n(65712),tm=n(42984),tp=n(21850),th=n(22055),tx=e=>{let{result:t,submit:n}=e,l=(0,s.useTranslations)("threads.entry.entryRetry"),a=(0,s.useTranslations)("shared"),{openModal:o}=(0,e2.X)(),c=(0,ta.lG)(),d=(0,tc.W)(),{isMobileStyle:u}=(0,er.d)(),{gpt4Limit:m,opusLimit:p}=(0,tu.h)(),h=function(){let{"pplx-gpt4-limit":e}=(0,ey.useRouter)().query,t=Number(e);return Number.isInteger(t)?t:null}(),{trackEvent:x}=(0,ek.WS)(),v=null==t?void 0:t.query_str,g=null==t?void 0:t.backend_uuid,j=null!==h?h:m,b=(0,td.S)(p),f=(0,r.useCallback)(e=>{n&&v&&n({rawQuery:v,existingEntryUUID:g,modelPreference:"copilot"!==e?e:void 0,copilotOverride:"copilot"===e||void 0,redoSearch:!1,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:t.frontend_context_uuid,promptSource:"user",querySource:"retry"})},[n,v,g,t.frontend_context_uuid]),y=(0,r.useCallback)(e=>{if(!c){o("loginModal",{origin:tp.FM.RETRY_BUTTON}),x("rewrite button showed login",{clickType:e});return}if(b.get(e).requiresPro&&!d||j<=0){o("pricingModal",{redirectUrl:(0,eR.Uz)(window.location.href,"pro-source","rewrite-button"),origin:tp.FM.RETRY_BUTTON}),x("rewrite button showed pro",{clickType:e});return}"claude3opus"===e&&p<=0||(f(e),x("rewrite button rewrote",{clickType:e}))},[c,d,j,p,x,o,b,f]);if(!v||!n||!g)return null;let k=[{icon:R.A6,text:"Pro Search",label:l("copilotDescription"),onClick:()=>{x("rewrite button copilot clicked",{}),y("copilot")}},{text:b.get("experimental").name,label:b.get("experimental").label,onClick:()=>{x("rewrite button experimental clicked",{}),y("experimental")}},{text:b.get("gpt4").name,label:b.get("gpt4").label,onClick:()=>{x("rewrite button gpt4 clicked",{}),y("gpt4")}},{text:b.get("claude2").name,label:b.get("claude2").label,badge:a("new"),onClick:()=>{x("rewrite button claude2 clicked",{}),y("claude2")}},{text:b.get("claude3opus").name,label:b.get("claude3opus").label,badge:a("new"),onClick:()=>{x("rewrite button claude3opus clicked",{}),y("claude3opus")}},{text:b.get("mistral").name,label:b.get("mistral").label,onClick:()=>{x("rewrite button mistral clicked",{}),y("mistral")}}];return(0,i.jsx)(th.G,{isMobileStyle:u,title:l("rewriteDescription"),items:k,onOpen:()=>x("rewrite button menu opened",{}),children:(0,i.jsx)(_.Z,{pill:!0,size:"small",text:l("rewrite"),icon:tm.jH})})};let tv={turbo:null,gpt4:"GPT-4 Turbo",claude2:"Claude 3 Sonnet",claude3opus:"Claude 3 Opus",experimental:"Sonar Large 32K",mistral:"Mistral Large"};var tg=e=>{let{modelName:t}=e,n=tv[t];return null==n?null:(0,i.jsx)(k.ZP,{className:"hidden rounded border p-xs md:block",children:(0,i.jsx)(x.Z,{variant:"smallCaps",color:"light",children:n})})},tj=n(8086),tb=n(95728),tf=n(68734),ty=n(86221),tk=n(49339),t_=n(47465),tw=n(72596),tS=n(79075);let tC=r.memo(e=>{let{isOpen:t,onClose:n,onSubmit:l,entryUUID:a}=e,{isMobileStyle:o,isMobileUserAgent:c}=(0,er.d)(),[u,m]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),[x,v]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!1),[b,f]=(0,r.useState)(!1),[y,_]=(0,r.useState)(!1),[w,S]=(0,r.useState)(""),C=(0,s.useTranslations)("search.report"),T=(0,r.useMemo)(()=>u||p||x||g||b||y||w.length>0,[u,p,x,g,b,y,w]),N=(0,r.useCallback)(()=>{a&&T&&(l({inaccurate:u,out_of_date:p,too_short:x,too_long:g,harmful:b,not_helpful:y,better_answer:w}),n())},[a,T,l,u,p,x,g,b,y,w,n]),E=(0,r.useMemo)(()=>[{text:"Cancel",onClick:n},{text:"Submit",onClick:N,disabled:!T,variant:"primary"}],[T,N,n]),U="border-b md:border md:rounded";return(0,i.jsxs)(tw.Z,{title:C("helpUs"),subtitle:C("modalSubtitle"),isOpen:t,onClose:n,actionList:E,children:[(0,i.jsxs)("div",{className:"mb-md grid gap-sm md:grid-cols-2",children:[(0,i.jsx)(k.ZP,{className:U,children:(0,i.jsx)(tS.s,{text:"Inaccurate",active:u,icon:ty.k$,onClick:()=>m(e=>!e)})}),(0,i.jsx)(k.ZP,{className:U,children:(0,i.jsx)(tS.s,{text:"Out of date",active:p,icon:tk.J4,onClick:()=>h(e=>!e)})}),(0,i.jsx)(k.ZP,{className:U,children:(0,i.jsx)(tS.s,{text:C("tooShort"),active:x,icon:tj.cc,onClick:()=>v(e=>!e)})}),(0,i.jsx)(k.ZP,{className:U,children:(0,i.jsx)(tS.s,{text:C("tooLong"),active:g,icon:tb.O_,onClick:()=>j(e=>!e)})}),(0,i.jsx)(k.ZP,{className:U,children:(0,i.jsx)(tS.s,{text:C("harmful"),active:b,icon:tf.sC,onClick:()=>f(e=>!e)})}),(0,i.jsx)(k.ZP,{className:U,children:(0,i.jsx)(tS.s,{text:C("notHelpful"),active:y,icon:t_.MY,onClick:()=>_(e=>!e)})})]}),(0,i.jsx)(d.Z,{isMobileStyle:o,isMobileUserAgent:c,label:C("howToImprove"),placeholder:C("feedbackPlaceholder"),value:w,isOptional:!0,onChange:e=>S(e.target.value),onClear:()=>S("")})]})});var tT=n(79170),tN=n(55685),tE=n(61904),tU=n(2679);let tP=r.memo(e=>{let{onDelete:t,onReport:n,hasReported:l,onViewSources:a,backendUUID:o}=e,{isMobileStyle:c}=(0,er.d)(),{trackEvent:d}=(0,e9.h)(),u=(0,r.useCallback)(()=>{d("click delete entry",{entryUUID:o}),null==t||t()},[d,t,o]),m=(0,s.useTranslations)("search.thread"),p=(0,s.useTranslations)("search.report"),h=(0,s.useTranslations)("shared"),x=(0,r.useMemo)(()=>[{text:m("viewSources"),icon:eO.oJ,onClick:a,show:!!a},{text:l?p("reported"):p("report"),show:!!n,icon:l?tU.b:tN.b,onClick:n},{text:h("delete"),show:!!t,icon:tE.faXmark,onClick:u}],[m,a,l,p,n,h,t,u]);return(0,r.useMemo)(()=>x.every(e=>!e.show),[x])?null:(0,i.jsx)("div",{className:"",children:(0,i.jsx)(th.G,{items:x,placement:"bottom-end",isMobileStyle:c,children:(0,i.jsx)(_.Z,{size:"small",icon:tT.cN,pill:!0})})})});var tZ=n(53415);let tR=()=>{let{isMobileStyle:e}=(0,er.d)(),t=ek.zW.getStartFirstServerResponseElapsed(),n=ek.zW.getFirstSearchResultElapsed(),l=ek.zW.getStartLLMTokenElapsed(),r=[{text:"First Response: ".concat(t,"ms"),show:t>0},{text:"Search: ".concat(n,"ms"),show:n>0},{text:"LLM Token: ".concat(l,"ms"),show:l>0}];return r.every(e=>!1===e.show)?null:(0,i.jsx)("div",{className:"",children:(0,i.jsx)(th.G,{items:r,placement:"bottom-end",isMobileStyle:e,children:(0,i.jsx)(_.Z,{size:"small",icon:tZ.SZ})})})};var tM=n(36808),tI=n(50882),tz=n(40776),tD=n(46532),tO=n(43133),tA=n(6376);let tF="https://admin.i.perplexity.ai/debugger/";var tL=e=>{var t;let{result:n,idx:l,isSnapshotRender:a,submit:o,response:c,webResults:d,isEditingQuery:m,localRef:p,setIsEditingQuery:h,setEditQueryValue:x,deleteLast:v,inFlight:g,isFirstResult:j,isLastResult:b,isReadonly:f}=e,[y,k]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!1),[C,T]=(0,r.useState)(!1),N=(0,tD.f)(),E=(0,tl.NL)(),U=(0,ta.h2)(),{trackEvent:P}=(0,e9.h)(),{openModal:Z}=(0,e2.X)(),{threadMetadata:R}=(0,e_.a0)(),M=(0,e8.p)(),I=(null===(t=R.collection)||void 0===t?void 0:t.access)||u.Pv,z=(0,ts.O)(),D=(0,s.useTranslations)("socialShare"),O=(0,s.useTranslations)("shared"),A=(null==n?void 0:n.thread_access)>tp.uv.PRIVATE_READ,F=I>tp.uv.PRIVATE_READ&&(A||!!M),L=(0,r.useCallback)(()=>{null!=R.contextUUID&&null!=M&&z(R.contextUUID,tp.uv.PUBLIC_READ,M,e=>{E.setQueryData(["results",{frontend_context_uuid:n.frontend_context_uuid}],t=>{if(!t)return;let[n,...i]=t;return[{...n,thread_access:e},...i]})})},[E,n.frontend_context_uuid,M,z,R.contextUUID]),X=(0,r.useCallback)(()=>{let e=M&&!A;e&&L();let t=null==n?void 0:n.thread_url_slug,{protocol:i,host:r}=window.location,s="".concat(i,"//").concat(r,"/search/").concat(t);navigator.clipboard.writeText(N?(0,eR.RP)(decodeURIComponent(s),l.toString()):""),e&&(k(!0),setTimeout(()=>k(!1),3e3)),P("click copy link button",{entryUUID:n.backend_uuid})},[l,M,A,null==n?void 0:n.thread_url_slug,n.backend_uuid,N,P,L]),q=(0,r.useCallback)(()=>{var e;x(null!==(e=null==n?void 0:n.query_str)&&void 0!==e?e:""),h(!1),P("cancel edit query click",{})},[P,null==n?void 0:n.query_str,x,h]),W=(0,r.useCallback)(()=>{if(P("edit query click",{entryUUID:n.backend_uuid}),m)q();else{var e;window.scrollTo(0,(null===(e=p.current)||void 0===e?void 0:e.offsetTop)-50),h(!0)}},[P,m,q,p,h,n.backend_uuid]),{mutate:H}=(0,tr.D)({mutationKey:["negative","feedback"],mutationFn:e=>(0,to.o_)(n.backend_uuid,"reject",e)}),B=(0,r.useCallback)(()=>{n.backend_uuid&&C||H({}),S(!0),P("click report button",{entryUUID:n.backend_uuid})},[n.backend_uuid,C,P,H]),G=(0,r.useCallback)(()=>{S(!1)},[]),Q=(0,r.useCallback)(e=>{H({feedback:e}),T(!0)},[H]),K=(0,r.useCallback)(()=>{Z("citationListModal",{entry:n,submit:M?o:void 0,webResults:d}),P("click view sources button",{entryUUID:n.backend_uuid})},[Z,n,o,P,M,d]);return"completed"!==n.status||a?null:(0,i.jsxs)("div",{className:"mt-sm flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"-ml-sm flex items-center gap-xs",children:[F&&(0,i.jsx)(_.Z,{clickFeedback:!0,size:"small",text:O("share"),toolTip:D("shareLink"),icon:tz.faShare,pill:!0,onClick:X}),!!M&&(0,i.jsx)(tx,{result:n,submit:o})]}),(0,i.jsxs)("div",{className:"flex items-center gap-x-xs",children:[!!(null==c?void 0:c.answer)&&(0,i.jsx)(tO.e,{answer:c.answer,webResults:d,trackEvent:()=>P("click copy output button",{entryUUID:n.backend_uuid})}),!!M&&(0,i.jsx)(_.Z,{size:"small",pill:!0,toolTip:D("editQuery"),icon:tI.faPenToSquare,onClick:W}),!g&&(0,i.jsx)(tP,{onDelete:j||!b||f?void 0:v,onReport:M&&!f?B:void 0,onViewSources:d.length>0?K:void 0,hasReported:C,backendUUID:n.backend_uuid}),U&&(0,i.jsx)("a",{href:tF+n.backend_uuid,target:"_blank",children:(0,i.jsx)(_.Z,{size:"small",pill:!0,toolTip:"Debugger",icon:tM.lT})}),U&&b&&(0,i.jsx)(tR,{}),!f&&(0,i.jsx)(tg,{modelName:n.display_model})]}),(0,i.jsx)(tC,{isOpen:w,onClose:G,entryUUID:n.backend_uuid,onSubmit:Q}),(0,i.jsx)(tA.Z,{message:D("linkCopied"),variant:"success",isVisible:y,timeout:3})]})},tX=n(58148),tq=n(37511),tW=n(53314);let tH={normal:{buttonId:"ZssfUcnb",headlineText:"Help us improve Perplexity.",subText:"Take a short survey and share your feedback."},plus:{buttonId:"VNauCpcO",headlineText:"As a Perplexity Pro user, your feedback is important to us.",subText:"Help us improve Perplexity with a short survey."},copilot:{buttonId:"AVbI26zZ",headlineText:"How satisfied were you with this Pro Search?",subText:"Help us improve with a short survey"}};var tB=e=>{let{isCopilot:t,debuggerURL:n,query:l}=e,[s,a]=(0,r.useState)(!0),o=(0,tW.X)(),{isMobileStyle:d}=(0,er.d)(),u=(0,tD.f)(),m=(0,tc.W)();if((0,r.useEffect)(()=>{a("true"===sessionStorage.getItem("surveyBannerDismissed"))},[]),s)return null;let{buttonId:p,headlineText:h,subText:v}=tH[null!=o?o:t?"copilot":m?"plus":"default"]||tH.normal;return(0,i.jsxs)(k.ZP,{variant:"offset",className:"flex items-center justify-between gap-x-md rounded p-md",children:[(0,i.jsxs)("div",{className:"flex items-center gap-x-md",children:[(0,i.jsx)(x.Z,{color:"super",className:"hidden md:block",children:(0,i.jsx)(c.G,{size:"2x",icon:tq.Z})}),(0,i.jsxs)("div",{children:[(0,i.jsx)(x.Z,{variant:"baseSemi",children:h}),(0,i.jsx)(x.Z,{variant:"small",color:"light",children:v})]})]}),(0,i.jsx)("div",{children:u&&(0,i.jsx)(tX.PopupButton,{id:p,onSubmit:()=>{a(!0),sessionStorage.setItem("surveyBannerDismissed","true")},hidden:{query:null!=l?l:"",debugger_url:null!=n?n:""},children:(0,i.jsx)(_.Z,{variant:"positiveSelected",text:"Begin"})})})]})},tG=n(10412),tQ=n(68328);let tK=o()(()=>Promise.all([n.e(9402),n.e(508),n.e(1987),n.e(7799),n.e(5818),n.e(2819),n.e(574),n.e(7365),n.e(9393)]).then(n.bind(n,29393)).then(e=>e.MarkdownResponse),{loadableGenerated:{webpack:()=>[29393]},loading:()=>null}),tJ=["tellMeMore"],tY=e=>{var t,n,a;let{submit:o,onRelatedButtonClick:c,onTextSelectClick:d,showSurvey:u=!1,onBotStep:m,deleteLast:p,showAnimations:h,localRef:v,isEditingQuery:g,setEditQueryValue:j,setIsEditingQuery:b}=e,{isMobileStyle:f,isMobileUserAgent:y}=(0,er.d)(),_=(0,s.useTranslations)("shared"),{trackEvent:w}=(0,ek.WS)(),{data:C}=(0,l.useSession)(),{getEppoStringVariation:T}=(0,eX.DQ)(),{idx:N,isPending:E,isCopilot:U,mediaItems:P,steps:Z,result:R,response:M,isFailed:I,isFirstResult:z,isLastResult:D,inFlight:A,isReadonly:F,hasAnswer:L,isFinalStep:X,isSnapshotRender:q}=(0,eF.T)(),{previousUnusedRelatedQueries:W,setPreviousUnusedRelatedQueries:H,inFlight:B}=(0,e_.a0)(),Q=null==R?void 0:R.widget_data,K=null==R?void 0:R.expect_search_results,J=null==M?void 0:M.web_results,Y=null!=J&&J.length>0,V=null==R?void 0:R.knowledge_cards,$=(0,eq.mm)({setIfNotExists:!0}),ee=(0,r.useMemo)(()=>{var e;return{citationTooltips:"true"===T({key:$,flag:"citation-tooltip",subjectType:"visitor_id",subjectAttributes:{userEmail:null==C?void 0:null===(e=C.user)||void 0===e?void 0:e.email,visitorId:$}})}},[T,$,null==C?void 0:null===(t=C.user)||void 0===t?void 0:t.email]),et=(0,r.useMemo)(()=>{var e,t;return null!=Z&&Z.length>0&&(null===(t=Z[Z.length-1])||void 0===t?void 0:null===(e=t.step_type)||void 0===e?void 0:e.indexOf("PROMPT"))!==-1},[Z]),en=(0,r.useMemo)(()=>{var e,t,n;return null!=Z&&Z.length>0&&((null===(e=Z[Z.length-1])||void 0===e?void 0:e.step_type)==="USER_INPUT"||(null===(t=Z[Z.length-1])||void 0===t?void 0:t.step_type)==="USER_SKIP"||(null===(n=Z[Z.length-1])||void 0===n?void 0:n.step_type)==="USER_REGENERATE")},[Z]),ei=!I&&D&&X&&(null!==(a=null==R?void 0:null===(n=R.related_queries)||void 0===n?void 0:n.length)&&void 0!==a?a:0)>0,el=null!=V&&V.length>0&&!q&&!f,es=null!=Q&&Q.length>0,ea=!q&&X&&(Y||!U&&"true"===K&&!es),eo=!U&&A&&!ea&&void 0===K,ec=(0,s.useTranslations)("search.threadEntry"),ed=!et&&!q&&!es&&U,eu=(0,r.useCallback)(e=>{(null==R?void 0:R.related_queries)&&H(R.related_queries.filter(t=>t!==e.rawQuery)),c(e)},[null==R?void 0:R.related_queries,c,H]);(0,r.useEffect)(()=>{(null==R?void 0:R.status)!=="completed"||(null==R?void 0:R.is_related_query_result)||H([])},[null==R?void 0:R.status,null==R?void 0:R.is_related_query_result,H]);let em=(0,r.useMemo)(()=>{if(null==R?void 0:R.related_queries)return[...null==R?void 0:R.related_queries,...W]},[W,null==R?void 0:R.related_queries]);return(0,i.jsxs)(i.Fragment,{children:[eo?(0,i.jsx)(eL.a,{}):(0,i.jsxs)("div",{children:[ed&&(0,i.jsx)(G,{inFlight:A,steps:Z,hasUserInput:en,showAnimations:h}),ea&&(A&&0===J.length?(0,i.jsx)(eA,{}):(0,i.jsx)(tn,{inFlight:A,showAnimations:h,webResults:J,entry:R,submit:o})),et&&(0,i.jsx)(O,{isMobileStyle:f,isMobileUserAgent:y,steps:Z,onBotStep:m,skipText:ec("skipText"),skip:_("skip")}),!et&&X&&(0,i.jsxs)(eD.Z,{title:q?void 0:ec("answer"),loading:A,isSnapshotRender:q,titleIcon:tG.el,showPplxMark:!0,queryStr:R.query_str,children:[es&&(0,i.jsx)(ez,{data:Q[0],submit:o,isReadonly:F}),el&&(0,i.jsx)(ez,{data:V[0],submit:o,isReadonly:F}),(0,i.jsx)(x.Z,{className:"relative",children:(0,i.jsx)("div",{className:S()("min-w-0 break-words [word-break:break-word]"),children:(0,i.jsxs)("div",{dir:"auto",children:[I&&(0,i.jsx)(tQ.m,{result:R}),E&&!L&&!I&&(0,i.jsx)(eh.Z,{}),!!M&&(0,i.jsx)(e5,{onClick:d,existingFrontendContextUUID:null==R?void 0:R.frontend_context_uuid,isReadonly:F,disabled:B,children:(0,i.jsx)(tK,{response:M,isPending:E,trackEvent:w,experiments:ee})})]})})}),f&&(0,i.jsx)(eY,{mediaItems:P,isDoneFetchingMedia:L,isStreaming:E,isLastResult:D,showAnimations:h,isReadOnly:F,entryTitle:R.query_str,entryUUID:R.backend_uuid,frontendContextUUID:R.frontend_context_uuid}),(0,i.jsx)(tL,{result:R,idx:N,isSnapshotRender:q,submit:o,response:M,webResults:J,localRef:v,deleteLast:p,inFlight:A,isFirstResult:z,isLastResult:D,isReadonly:F,isEditingQuery:g,setIsEditingQuery:b,setEditQueryValue:j})]})]}),ei&&(0,i.jsxs)("div",{className:S()("",{"pb-lg":E}),children:[!E&&z&&u&&(0,i.jsx)("div",{className:"pt-md",children:(0,i.jsx)(tB,{isCopilot:U,query:null==R?void 0:R.query_str,debuggerURL:tF+R.backend_uuid})}),(0,i.jsx)(k.ZP,{className:"mt-lg border-t pt-lg animate-in fade-in duration-1000 ease-out",children:(0,i.jsx)(ti.Z,{relatedQueries:em,existingFrontendContextUUID:null==R?void 0:R.frontend_context_uuid,onClick:eu,isPending:E,show:ei,isReadonly:F,title:ec("relatedQueries")})})]})]})}},5993:function(e,t,n){var i=n(97458),l=n(40853),r=n(52983),s=n(56047),a=n(10107),o=n(60971),c=n(63769),d=n(51865),u=n.n(d);let m=r.memo(e=>{let{title:t,titleIcon:n,titleAccessory:d,titleUrl:m,showPplxMark:p,children:h,queryStr:x,loading:v,isSnapshotRender:g}=e,{trackEvent:j}=(0,s.WS)(),[b,f]=(0,r.useState)(!1),y=(0,r.useCallback)(()=>{if(null!=m){var e;j("click result entry header",{query:x}),null===(e=window.open(m,"_blank"))||void 0===e||e.focus()}},[j,x,m]);return(0,i.jsxs)(a.ZP,{children:[(0,i.jsx)(a.ZP,{variant:g?"transparent":"background",className:u()("flex","items-center","justify-between"),children:t&&(0,i.jsxs)("div",{className:"mb-sm flex w-full items-center justify-between",children:[(0,i.jsx)("div",{onClick:y,className:u()({"cursor-pointer":null!=m}),children:(0,i.jsxs)("div",{color:"super",className:"flex items-center space-x-sm ",children:[(0,i.jsx)(o.Z,{variant:"section-title",as:"div",children:p?(0,i.jsx)("div",{className:"relative -top-[1px] flex w-[24px] transform-gpu items-center justify-center",onClick:()=>{f(!0),setTimeout(()=>{f(!1)},0)},children:(0,i.jsx)(c.Q,{size:24,shouldAnimate:v||b})}):(0,i.jsx)("div",{className:"w-[24px]",children:(0,i.jsx)(l.G,{fixedWidth:!0,icon:n})})}),(0,i.jsx)(o.Z,{variant:"section-title",as:"div",children:t})]})}),d]})}),h]})});t.Z=m},16569:function(e,t,n){n.d(t,{S:function(){return l}});var i=n(71485);let l=e=>{let t=(0,i.useTranslations)("settings.account"),n=e>10?t("claude3Description",{anthropic:"Anthropic"}):t("claude3Description",{anthropic:"Anthropic"})+"\n"+t("claude3RateLimit",{remaining:e});return new Map([["copilot",{name:t("default"),label:t("defaultModelDescription",{pplx:"Perplexity"}),requiresPro:!1}],["experimental",{name:"Sonar Large 32K",label:t("experimentalModelDescription",{pplx:"Perplexity"}),requiresPro:!0}],["gpt4",{name:"GPT-4 Turbo",label:t("openaiDescription",{openai:"OpenAI"}),requiresPro:!0}],["claude2",{name:"Claude 3 Sonnet",label:t("claude2Description",{anthropic:"Anthropic"}),requiresPro:!0}],["claude3opus",{name:"Claude 3 Opus",label:n,requiresPro:!0}],["mistral",{name:"Mistral Large",label:t("mistralDescription",{mistral:"Mistral"}),requiresPro:!0}]])}},36938:function(e,t,n){n.d(t,{AM:function(){return d},J1:function(){return a},M6:function(){return p},TF:function(){return r},Th:function(){return m},eS:function(){return h},fz:function(){return c},jX:function(){return u},l8:function(){return o},mq:function(){return s},o_:function(){return l}});var i=n(86178);let l=async(e,t,n)=>{let l="sendUserFeedback";try{let r=await (0,i.FX)({urlPath:"p/api/v1/entry/feedback/".concat(e),timeoutMs:(0,i.vX)(),method:"POST",body:JSON.stringify({label:t,feedback:n}),headers:{"Content-Type":"application/json"},retryOnFailure:!1});return(0,i.HL)(l),r.json()}catch(e){throw(0,i.i8)(l,e),console.error("".concat(l," error:"),e),e}},r=async(e,t,n)=>{let l="updateArticleSectionTitle";if(n)try{let r=await (0,i.FX)({urlPath:"p/api/v1/article/section/title/".concat(e),timeoutMs:(0,i.vX)(),method:"PUT",body:JSON.stringify({read_write_token:n,title:t}),headers:{"Content-Type":"application/json"},retryOnFailure:!0});return(0,i.HL)(l),r.json()}catch(e){throw(0,i.i8)(l,e),console.error("".concat(l," error:"),e),e}},s=async(e,t,n)=>{let l="updateArticleSectionHeroOffset";if(n)try{let r=await (0,i.FX)({urlPath:"p/api/v1/article/section/hero_offset/".concat(e),timeoutMs:(0,i.vX)(),method:"PUT",body:JSON.stringify({read_write_token:n,hero_offset:t}),headers:{"Content-Type":"application/json"},retryOnFailure:!0});return(0,i.HL)(l),r.json()}catch(e){throw(0,i.i8)(l,e),console.error("".concat(l," error:"),e),e}},a=async(e,t)=>{let n="deleteArticleSection";if(e&&t)try{let l=await (0,i.FX)({urlPath:"p/api/v1/article/section/".concat(e),timeoutMs:(0,i.vX)(),method:"DELETE",body:JSON.stringify({read_write_token:t}),headers:{"Content-Type":"application/json"},retryOnFailure:!0}),r=await l.json();return(0,i.HL)(n),r}catch(e){throw(0,i.i8)(n,e),console.error("".concat(n," error:"),e),e}},o=async(e,t)=>{let n="updateArticleSectionsLayout";if(t&&0!==e.length)try{let l=await (0,i.FX)({urlPath:"p/api/v1/article/sections/layout",timeoutMs:(0,i.vX)(),method:"PUT",body:JSON.stringify({read_write_token:t,sections:e}),headers:{"Content-Type":"application/json"},retryOnFailure:!0}),r=await l.json();return(0,i.HL)(n),r}catch(e){throw(0,i.i8)(n,e),console.error("".concat(n," error:"),e),e}},c=async(e,t,n,l)=>{let r="updateArticleSectionImage";if(l)try{let s=await (0,i.FX)({urlPath:"p/api/v1/article/section/image/".concat(e),timeoutMs:(0,i.vX)(),method:"PUT",body:JSON.stringify({read_write_token:l,media_item_image_url:t,target_index:n}),headers:{"Content-Type":"application/json"},retryOnFailure:!0}),a=await s.json();return(0,i.HL)(r),a}catch(e){throw(0,i.i8)(r,e),console.error("".concat(r," error:"),e),e}},d=async(e,t,n)=>{let l="addMediaItemToSectionSelectedImagesMutation";if(n)try{let r=await (0,i.FX)({urlPath:"p/api/v1/article/section/media/add/".concat(e),timeoutMs:(0,i.vX)(),method:"PUT",body:JSON.stringify({read_write_token:n,media_item_image_url:t}),headers:{"Content-Type":"application/json"},retryOnFailure:!0}),s=await r.json();return(0,i.HL)(l),s}catch(e){throw(0,i.i8)(l,e),console.error("".concat(l," error:"),e),e}},u=async(e,t,n)=>{let l="uploadImageToSectionMediaItemsMutation";if(n)try{let r=await (0,i.FX)({urlPath:"p/api/v1/article/section/upload_image/".concat(e),timeoutMs:(0,i.vX)(),method:"POST",body:JSON.stringify({read_write_token:n,image:t}),headers:{"Content-Type":"application/json"},retryOnFailure:!0}),s=await r.json();return(0,i.HL)(l),s}catch(e){throw(0,i.i8)(l,e),console.error("".concat(l," error:"),e),e}},m=async(e,t,n)=>{let l="addMediaItemToSectionSelectedImagesMutation";if(n)try{let r=await (0,i.FX)({urlPath:"p/api/v1/article/section/media/remove/".concat(e),timeoutMs:(0,i.vX)(),method:"PUT",body:JSON.stringify({read_write_token:n,media_item_image_url:t}),headers:{"Content-Type":"application/json"},retryOnFailure:!0}),s=await r.json();return(0,i.HL)(l),s}catch(e){throw(0,i.i8)(l,e),console.error("".concat(l," error:"),e),e}},p=async(e,t,n,l)=>{let r="reorderArticleSectionMutation";if(l)try{let s=await (0,i.FX)({urlPath:"p/api/v1/article/reorder/".concat(e),timeoutMs:(0,i.vX)(),method:"PUT",body:JSON.stringify({read_write_token:l,section_uuid:t,relative_move:n}),headers:{"Content-Type":"application/json"},retryOnFailure:!0}),a=await s.json();return(0,i.HL)(r),a}catch(e){throw(0,i.i8)(r,e),console.error("".concat(r," error:"),e),e}},h=async e=>{let t="terminateArticleSectionStreaming";if(e)try{let n=await (0,i.FX)({urlPath:"p/api/v1/article/section/terminate/".concat(e),timeoutMs:(0,i.vX)(),method:"POST",retryOnFailure:!0});return(0,i.HL)(t),n.json()}catch(e){throw(0,i.i8)(t,e),console.error("".concat(t," error:"),e),e}}},43133:function(e,t,n){n.d(t,{e:function(){return a}});var i=n(97458),l=n(95194),r=n(52983),s=n(45201);let a=e=>{let{answer:t,webResults:n,text:a,icon:o=l.Yjj,tooltipText:c="Copy",trackEvent:d,...u}=e,[m,p]=(0,r.useState)(!1);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.Z,{text:a,pill:!0,clickFeedback:!0,icon:o,disabled:m,size:"small",onClick:()=>{p(!0),d&&d();let e=[t],i=n.map((e,t)=>{let{url:n}=e;return n?"[".concat(t+1,"] ").concat(n):null}).filter(e=>e);i.length&&e.push("Citations:\n".concat(i.join("\n")));let l=e.join("\n\n");navigator.clipboard.writeText(l).then(()=>{p(!1)},()=>p(!1))},toolTip:c,tooltipLayout:"top",...u})})}},68328:function(e,t,n){n.d(t,{m:function(){return c}});var i=n(97458),l=n(43566),r=n.n(l),s=n(52983),a=n(10107),o=n(97535);let c=s.memo(e=>{var t;let{result:n,...l}=e,c=(0,s.useMemo)(()=>{var e;return(null==n?void 0:null===(e=n.text)||void 0===e?void 0:e.indexOf("Query rate limit exceeded"))!==-1},[null==n?void 0:n.text]);return(0,i.jsxs)(a.ZP,{...l,children:[null!==(t=null==n?void 0:n.text)&&void 0!==t?t:"Please try Perplexity again later.",c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.ZP,{className:"my-md mb-sm",children:["Please"," ",(0,i.jsx)(r(),{className:"underline",href:"https://www.perplexity.ai/api/auth/signin",target:"_blank",rel:"noreferrer",children:"sign up"})," ","for higher personalized rate limits."]}),(0,i.jsxs)(a.ZP,{className:"my-md mb-2xl",children:["See Perplexity"," ",(0,i.jsx)(r(),{className:"underline",href:o.jY,target:"_blank",rel:"noreferrer",children:"Terms of Service"})," ","for details."]})]})]})})},95330:function(e,t,n){var i=n(97458),l=n(52983),r=n(60971),s=n(74979),a=n(65340),o=n(92497),c=n(49674),d=n(3837),u=n(87033),m=n(52916),p=n(30049),h=n(35112),x=n(59815);let v="\ntext-default text-left hover:text-super hover:dark:text-superDark focus:text-super mb-xs transition-color line-clamp-2 cursor-pointer font-sans text-sm font-medium duration-150\n",g={transition:{duration:.125},initial:{y:3,opacity:0},animate:{y:0,opacity:1},exit:{y:3,opacity:0}};t.Z=e=>{let{children:t,contentProps:n,divProps:j,linkProps:b,result:f,motionProps:y,updatedAtTimestamp:k}=e,[_,w]=(0,l.useState)(!1),[S,C]=(0,l.useState)(),[T,N]=(0,l.useState)(!1),E=!!(0,s.k8)(f.url),U=!!(0,s.fM)(f.url),P=(0,m.J)();return(0,p.L)(()=>{C(document.querySelector("main"))},[]),(0,i.jsx)(d.zt,{delayDuration:200,children:(0,i.jsxs)(d.fC,{onOpenChange:e=>{w(e)},children:[(0,i.jsx)(d.xz,{children:t}),(0,i.jsx)(h.M,{mode:"popLayout",children:_&&(0,i.jsx)(d.h_,{container:S,forceMount:!0,children:(0,i.jsx)(d.VY,{className:"z-20",side:"bottom",sideOffset:10,...n,children:(0,i.jsxs)(x.E.div,{className:"bg-background dark:bg-backgroundDark px-md py-sm p-xs dark:border-borderMainDark w-80 rounded border shadow-sm",...!P&&g,...!P&&y,...j,children:[(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[!U&&(0,i.jsx)(a.P,{className:"text-right",variant:"tiny",color:f.url&&(0,s.fM)(f.url)?"white":"light",url:f.url,isAttachment:f.is_attachment}),E?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("button",{className:v,onClick:()=>{N(!0)},children:f.name})}):U?(0,i.jsx)("span",{className:"text-default line-clamp-2 text-left font-sans text-sm",children:f.name}):(0,i.jsx)(u.Q,{className:v,result:f,...b,children:f.name})]}),void 0===f.snippet?(0,i.jsx)(o.Z,{}):(0,i.jsx)(r.Z,{variant:"small",className:"line-clamp-3",children:f.snippet}),k]},f.url)})})}),E&&(0,i.jsx)(c.u,{isOpen:T,name:f.name,setisOpen:N,url:f.url})]})})}},31928:function(e,t,n){n.d(t,{r:function(){return u}});var i=n(97458),l=n(51865),r=n.n(l),s=n(52983),a=n(10107),o=n(60971),c=n(74979),d=n(66477);let u=e=>{let{result:t,idx:n,trackEvent:l,...u}=e,m=t.url,p=(0,s.useMemo)(()=>(0,c.C$)(m),[m]);return(0,i.jsx)("a",{className:"group flex cursor-pointer items-stretch ",href:m,onClick:()=>{l("click citation",{source:"sourceCard",citation_url:m})},target:"_blank",rel:"noopener",...u,children:(0,i.jsx)(a.ZP,{variant:"offset",bgHover:"offsetPlus",className:r()("px-sm gap-sm flex  h-[74px] w-full items-center overflow-hidden rounded-md",{}),children:(0,i.jsxs)("div",{className:"gap-sm flex",children:[(0,i.jsx)(a.ZP,{className:"flex h-8 w-8 flex-none items-center justify-center rounded-full border",children:(0,i.jsx)(d.D,{size:32,domain:p})}),(0,i.jsx)("div",{className:"grow",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:r()("flex items-center",{}),children:[(0,i.jsx)(o.Z,{variant:"tiny",className:"line-clamp-1",children:t.name}),(0,i.jsx)(o.Z,{variant:"tiny",color:"light",className:"ml-sm",children:p}),(0,i.jsx)(o.Z,{variant:"tiny",color:"light",className:"mx-xs inline-block",children:" \xb7 "}),(0,i.jsx)(o.Z,{variant:"tiny",color:"light",children:n+1})]}),(0,i.jsx)(o.Z,{variant:"tiny",color:"light",className:"mt-two line-clamp-2",children:t.snippet})]})})]})},t.name)},n)}},6225:function(e,t,n){n.d(t,{B:function(){return c}});var i=n(97458),l=n(51865),r=n.n(l),s=n(52983),a=n(14914),o=n(14671);let c=e=>{let{popoverContent:t,children:n,disabled:l,contentClass:c,handleOpenChange:d,selectionTestId:u,hidePopover:m}=e,p=(0,s.useRef)();return(0,s.useEffect)(()=>{p.current=document.querySelector("main")},[]),(0,i.jsx)(o.M,{condition:!l,wrapper:e=>(0,i.jsxs)(a.fC,{onOpenChange:d,"data-test-id":u,children:[(0,i.jsx)(a.xz,{children:e}),(0,i.jsx)(a.h_,{container:p.current,children:(0,i.jsxs)(a.VY,{avoidCollisions:!0,sideOffset:8,className:r()("data-[state=open]:animate-slideUpAndFadeIn data-[state=closed]:animate-slideDownAndFadeOut origin-bottom duration-150",{[c]:!!c}),children:[!m&&t,!m&&(0,i.jsx)(a.Eh,{})]})})]}),children:n})}}}]);