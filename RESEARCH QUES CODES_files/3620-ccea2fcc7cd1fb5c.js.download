"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3620],{49544:function(e,t){t.DF={prefix:"far",iconName:"eye",icon:[576,512,[128065],"f06e","M288 80c-65.2 0-118.8 29.6-159.9 67.7C89.6 183.5 63 226 49.4 256c13.6 30 40.2 72.5 78.6 108.3C169.2 402.4 222.8 432 288 432s118.8-29.6 159.9-67.7C486.4 328.5 513 286 526.6 256c-13.6-30-40.2-72.5-78.6-108.3C406.8 109.6 353.2 80 288 80zM95.4 112.6C142.5 68.8 207.2 32 288 32s145.5 36.8 192.6 80.6c46.8 43.5 78.1 95.4 93 131.1c3.3 7.9 3.3 16.7 0 24.6c-14.9 35.7-46.2 87.7-93 131.1C433.5 443.2 368.8 480 288 480s-145.5-36.8-192.6-80.6C48.6 356 17.3 304 2.5 268.3c-3.3-7.9-3.3-16.7 0-24.6C17.3 208 48.6 156 95.4 112.6zM288 336c44.2 0 80-35.8 80-80s-35.8-80-80-80c-.7 0-1.3 0-2 0c1.3 5.1 2 10.5 2 16c0 35.3-28.7 64-64 64c-5.5 0-10.9-.7-16-2c0 .7 0 1.3 0 2c0 44.2 35.8 80 80 80zm0-208a128 128 0 1 1 0 256 128 128 0 1 1 0-256z"]},t.Md=t.DF},9269:function(e,t){t.DF={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"]},t.IL=t.DF},42970:function(e,t){t.DF={prefix:"fas",iconName:"user-secret",icon:[448,512,[128373],"f21b","M224 16c-6.7 0-10.8-2.8-15.5-6.1C201.9 5.4 194 0 176 0c-30.5 0-52 43.7-66 89.4C62.7 98.1 32 112.2 32 128c0 14.3 25 27.1 64.6 35.9c-.4 4-.6 8-.6 12.1c0 17 3.3 33.2 9.3 48H45.4C38 224 32 230 32 237.4c0 1.7 .3 3.4 1 5l38.8 96.9C28.2 371.8 0 423.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7c0-58.5-28.2-110.4-71.7-143L415 242.4c.6-1.6 1-3.3 1-5c0-7.4-6-13.4-13.4-13.4H342.7c6-14.8 9.3-31 9.3-48c0-4.1-.2-8.1-.6-12.1C391 155.1 416 142.3 416 128c0-15.8-30.7-29.9-78-38.6C324 43.7 302.5 0 272 0c-18 0-25.9 5.4-32.5 9.9c-4.8 3.3-8.8 6.1-15.5 6.1zm56 208H267.6c-16.5 0-31.1-10.6-36.3-26.2c-2.3-7-12.2-7-14.5 0c-5.2 15.6-19.9 26.2-36.3 26.2H168c-22.1 0-40-17.9-40-40V169.6c28.2 4.1 61 6.4 96 6.4s67.8-2.3 96-6.4V184c0 22.1-17.9 40-40 40zm-88 96l16 32L176 480 128 288l64 32zm128-32L272 480 240 352l16-32 64-32z"]},t.BC=t.DF},20094:function(e,t,n){var i=n(97458),l=n(52983),c=n(43566),r=n.n(c),s=n(67262),a=n(10107),o=n(60971);let u=l.memo(e=>{let{title:t,action:n}=e;return(0,i.jsx)(s.L.Content,{children:(0,i.jsx)(a.ZP,{className:"mx-auto flex h-full max-w-screen-sm items-center justify-center",children:(0,i.jsxs)(a.ZP,{variant:"offset",className:"space-y-md rounded-md p-lg",children:[(0,i.jsx)(o.Z,{className:"text-center",variant:"section-title",children:t}),(0,i.jsx)(o.Z,{className:"text-center underline",variant:"section-title",color:"light",children:n||(0,i.jsx)(r(),{href:"/",children:"Head back home?"})})]})})})});t.Z=u},12720:function(e,t,n){n.d(t,{i:function(){return v}});var i=n(97458),l=n(71485),c=n(80631),r=n(56934),s=n(49544),a=n(80937),o=n(10107),u=n(58726),d=n(60971),m=n(15065),f=n(21850),x=n(51865),h=n.n(x);let v=e=>{let{title:t,description:n,authorImage:x,featuredImage:v,createNew:g,socialInfo:p,includeHeader:N=!0,accessLevel:j}=e,_=(0,l.useTranslations)("shared"),y=(0,l.useTranslations)("article");return(0,i.jsxs)(o.ZP,{className:"mt-md flex h-full flex-col rounded-lg border transition duration-200 hover:ring-1",children:[(0,i.jsx)(o.ZP,{variant:"offset",className:"m-xs overflow-hidden rounded-md",children:N?(0,i.jsx)(u.Z,{src:v,rounded:"md",containerClassName:"h-24",imageClassName:"object-cover object-center min-w-[100%] min-h-[100%]",alt:v?t:"",useNextImage:!1,includeLightBoxModal:!1}):null}),(0,i.jsxs)("div",{className:h()("flex min-h-[120px] grow flex-col px-md pt-sm pb-md",{}),children:[(0,i.jsxs)("div",{className:"grow",children:[(0,i.jsx)(d.Z,{variant:"baseSemi",className:"line-clamp-2",children:t}),(0,i.jsx)(d.Z,{color:"light",variant:"small",className:"mt-xs line-clamp-2",children:n})]}),(0,i.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[g?(0,i.jsx)(m.Z,{text:_("create"),size:"small",variant:"border",icon:a.r8}):(0,i.jsx)(r.Z,{size:"small",user:x}),g?null:(0,i.jsx)(i.Fragment,{children:j!==f.uv.PUBLIC_READ?(0,i.jsx)(d.Z,{variant:"tiny",color:"light",className:"rounded bg-offset px-[10px] py-xs dark:bg-offsetDark",children:y("draftLabelShort")}):(0,i.jsx)(c.W,{icon:s.Md,count:null==p?void 0:p.view_count})})]})]})]})}},75061:function(e,t,n){var i=n(97458),l=n(40853);n(52983);var c=n(71485),r=n(55110),s=n(79877),a=n(68956),o=n(35921),u=n(849),d=n(21850),m=n(10107),f=n(60971),x=n(97535),h=n(15065),v=n(45201);t.Z=e=>{var t;let{collection:n,acceptInvite:g,declineInvite:p,showLinkToCollection:N=!0}=e,j=(0,r.useRouter)(),_=n.access>d.uv.PRIVATE_READ,y=(0,c.useTranslations)("collection.contributor"),D=(0,c.useTranslations)("shared"),C=(0,c.useTranslations)("accessLevel");return(0,i.jsxs)(m.ZP,{variant:"offset",className:"rounded p-sm",children:[(0,i.jsx)(m.ZP,{className:"border-b pb-sm",children:(0,i.jsx)(f.Z,{color:"light",variant:"tiny",className:"grow",children:y("invitedSuccess")})}),(0,i.jsxs)(f.Z,{variant:"baseSemi",className:"mb-md mt-sm",children:[(0,i.jsxs)("div",{className:"mb-sm flex items-center gap-x-sm",children:[(0,i.jsx)(a.B,{unified:null!==(t=n.emoji)&&void 0!==t?t:x.$Y,size:"small"}),(0,i.jsx)(f.Z,{variant:"baseSemi",children:n.title})]}),(0,i.jsx)(s.Z,{textColor:"light",username:n.owner_user.username,image:n.owner_user.image,showAvatar:!0})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex gap-x-sm",children:[(0,i.jsx)(h.Z,{variant:"primary",text:D("accept"),size:"tiny",onClick:g}),(0,i.jsx)(h.Z,{text:D("discard"),size:"tiny",onClick:p})]}),N&&(_?(0,i.jsx)(v.Z,{size:"tiny",text:D("view"),chevron:!0,chevronIcon:o._t,onClick:()=>j.push("/collections/".concat(n.slug))}):(0,i.jsxs)(f.Z,{variant:"tiny",color:"light",className:"mr-sm",children:[(0,i.jsx)(l.G,{icon:u.by,className:"mr-xs"}),(0,i.jsx)("span",{children:C("secret")})]}))]})]})}},96381:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(97458),l=n(71485),c=n(20094),r=n(27721),s=n(15065);function a(){let{setIsIncognito:e}=(0,r.Y)(),t=(0,l.useTranslations)("incognito");return(0,i.jsx)(s.Z,{text:t("exit"),pill:!0,variant:"primary",onClick:()=>{e(!1)}})}function o(){let e=(0,l.useTranslations)("incognito");return(0,i.jsx)(c.Z,{title:e("unsupported"),action:(0,i.jsx)(a,{})})}},17738:function(e,t,n){n.d(t,{f:function(){return m}});var i=n(97458);n(52983);var l=n(71485),c=n(43566),r=n.n(c),s=n(35221),a=n(12720),o=n(13521),u=n(10107),d=n(60971);let m=e=>{let{articles:t,fetchNextPage:n,hasNextPage:c=!1,showLoadingState:m=!1,showEmptyState:f=!1}=e,x=(null!=t?t:[]).map(s.l3),h=(0,l.useTranslations)("threads.main");return f&&0===x.length?(0,i.jsx)(u.ZP,{variant:"offset",className:"mt-md flex items-center justify-center rounded p-xl",children:(0,i.jsx)(d.Z,{color:"light",children:h("noArticles")})}):(0,i.jsx)(o.D,{fetchNextPage:n,hasNextPage:c,showLoadingState:m,itemsToRender:x,children:(0,i.jsx)("div",{className:"grid grid-cols-2 gap-md pb-lg md:grid-cols-3",children:x.map(e=>(0,i.jsx)(r(),{className:"block",href:e.href,children:(0,i.jsx)(a.i,{title:e.title,authorImage:e.authorImage,featuredImage:e.featuredImage,socialInfo:e.socialInfo,accessLevel:e.accessLevel})},e.backendUUID))})})}},85285:function(e,t,n){var i=n(97458),l=n(52983),c=n(10107),r=n(60971),s=n(51865),a=n.n(s);t.Z=e=>{let{children:t,maxFaces:n=3,showMore:s=!0,clickable:o=!1,size:u="medium",onAvatarClick:d}=e,m=l.Children.count(t);return(0,i.jsxs)(c.ZP,{onClick:o?d:void 0,bgHover:o?"offset":void 0,className:a()("group flex items-center",{"cursor-pointer rounded-full p-xs transition-all":o}),children:[l.Children.map(t,(e,t)=>t<n?(0,i.jsx)(c.ZP,{variant:"background",className:a()("rounded-full group-hover:bg-transparent",{"relative transition-all duration-200 ease-in-out":0!==t,"-ml-[10px]  p-two group-hover:-ml-xs":0!==t&&"small"===u,"-ml-[16px]  p-two group-hover:-ml-sm":0!==t&&"medium"===u}),children:(0,i.jsx)("div",{children:e})},t):null),s&&m>n&&(0,i.jsx)(c.ZP,{children:(0,i.jsxs)(r.Z,{variant:"smallCaps",color:"light",className:"px-xs",children:["+",m-n]})})]})}},61241:function(e,t,n){n.d(t,{a:function(){return o}});var i=n(78931),l=n(82129),c=n(25617),r=n(10632),s=n(59324);let a=["fetch_invited_collections"],o=()=>{let e=(0,i.NL)(),t=(0,c.nO)(),{mutate:n}=(0,l.D)({mutationFn:async e=>{let{collection:n,callback:i}=e;await t.emitWithAck("respond_to_invitation",{collection_uuid:n.uuid,accept:!0,return_collection:!1}),null==i||i()},onMutate:async t=>{await e.cancelQueries(a),await e.cancelQueries(r.Xt);let n=e.getQueryData(r.Xt),i=e.getQueryData(a);return t.shouldRefetchCurrentCollection?e.setQueryData(["get_collection",{collection_slug:t.collection.slug.slice(-22)}],e=>({...e,user_permission:s.XJ.WRITER})):e.setQueryData(r.Xt,e=>{let n=(e=e||{pages:[],pageParams:[]}).pages[0];return{...e,pages:[[t.collection,...n]]}}),e.setQueryData(a,e=>e.filter(e=>e.uuid!==t.collection.uuid)),{previousCollections:n,previousInvitedCollections:i}},onError:(t,n,i)=>{e.setQueryData(r.Xt,i.previousCollections),e.setQueryData(a,i.previousInvitedCollections)},onSuccess:()=>{e.invalidateQueries(r.Xt),e.invalidateQueries(a)}}),{mutate:o}=(0,l.D)({mutationFn:async e=>{let{collection:n,callback:i}=e;await t.emitWithAck("respond_to_invitation",{collection_uuid:n.uuid,accept:!1,return_collection:!1}),null==i||i()},onMutate:async t=>{await e.cancelQueries(a);let n=e.getQueryData(a);return e.setQueryData(a,e=>e.filter(e=>e.uuid!==t.collection.uuid)),{previousInvitedCollections:n}},onError:(t,n,i)=>{e.setQueryData(a,i.previousInvitedCollections)},onSuccess:()=>{e.invalidateQueries(a)}}),{mutate:u}=(0,l.D)({mutationFn:async e=>{let{email:n,collectionUUID:i,callback:l}=e;await t.emitWithAck("invite_to_collection",{collection_uuid:i,contributor_email:n}),null==l||l()},onMutate:async t=>{let n=["get_collection",{collection_slug:t.collectionSlug.slice(-22)}];await e.cancelQueries(n);let i=e.getQueryData(n);return e.setQueryData(n,e=>({...e,contributor_users:e.contributor_users.concat({email:t.email,username:t.email,permission:s.XJ.INVITED_WRITER})})),{previousCollection:i}},onError:(t,n,i)=>{let l=n.collectionSlug.slice(-22);e.setQueryData(["get_collection",{collection_slug:l}],i.previousCollection)},onSuccess:(t,n)=>{let i=n.collectionSlug.slice(-22);e.invalidateQueries({queryKey:["get_collection",{collection_slug:i}]})}}),{mutate:d}=(0,l.D)({mutationFn:async e=>{let{email:n,collectionUUID:i,callback:l}=e;await t.emitWithAck("remove_from_collection",{collection_uuid:i,email:n}),null==l||l()},onMutate:async t=>{let n=["get_collection",{collection_slug:t.collectionSlug.slice(-22)}];await e.cancelQueries(n);let i=e.getQueryData(n);return e.setQueryData(n,e=>({...e,contributor_users:e.contributor_users.filter(e=>e.email!==t.email)})),{previousCollection:i}},onError:(t,n,i)=>{let l=n.collectionSlug.slice(-22);e.setQueryData(["get_collection",{collection_slug:l}],i.previousCollection)},onSuccess:(t,n)=>{let i=n.collectionSlug.slice(-22);e.invalidateQueries({queryKey:["get_collection",{collection_slug:i}]})}});return{addContributorUser:u,removeContributorUser:d,acceptCollectionInvite:n,declineCollectionInvite:o}}},59324:function(e,t,n){var i,l,c,r;n.d(t,{Om:function(){return d},Wi:function(){return x},XJ:function(){return i},Xc:function(){return l},gO:function(){return v},hT:function(){return f},hf:function(){return m},i5:function(){return o},mF:function(){return u},rj:function(){return h},xL:function(){return a},yM:function(){return s}});let s=5;function a(){return[1,2,3,4]}function o(){return[11,12,13]}function u(e){return 4===e}function d(e){return e>=3&&e<11}function m(e){return e>=2&&e<11}function f(e){return e>=1&&e<11}function x(e){return 0===e}function h(e){return o().includes(e)}function v(e){let t=e.owner_user,n=e.contributor_users,i=[],l=[];return null==n||n.forEach(e=>{11===e.permission||12===e.permission||13===e.permission?i.push(e):l.push(e)}),{ownerUser:t,contributorUsers:l,invitedUsers:i}}(c=i||(i={}))[c.NONE=0]="NONE",c[c.READER=1]="READER",c[c.WRITER=2]="WRITER",c[c.ADMIN=3]="ADMIN",c[c.OWNER=4]="OWNER",c[c.INVITED_READER=11]="INVITED_READER",c[c.INVITED_WRITER=12]="INVITED_WRITER",c[c.INVITED_ADMIN=13]="INVITED_ADMIN",(r=l||(l={})).PageAccessNotAllowed="pageAccessNotAllowed",r.ThreadAccessNotAllowed="threadAccessNotAllowed",r.InvalidThread="invalidThread",r.ThreadExpired="threadExpired",r.CollectionAccessNotAllowed="collectionAccessNotAllowed",r.InvalidCollection="invalidCollection",r.SubscriptionAlreadyActive="subscriptionAlreadyActive"}}]);