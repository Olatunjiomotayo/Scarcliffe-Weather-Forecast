"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9094],{84660:function(e,t,i){var a=i(97458),n=i(40853),s=i(52983),r=i(59842),l=i(24317),o=i(38585),c=i(28846),d=i(53896),u=i(18816),m=i(75221),h=i(65526),x=i(63011),g=i(7983),p=i(71729),f=i(44498),j=i(94299),v=i(38956),y=i(95087),b=i(37816),k=i(26232),w=i(18712),N=i(23360),I=i(78753),U=i(13826),Z=i(56676),S=i(41019),A=i(51910),C=i(87074),T=i(13405),L=i(91595),D=i(78601),_=i(62013),G=i(60971),P=i(10107),M=i(51865),E=i.n(M),O=i(59815);t.Z=e=>{let{}=e,[t,{width:i}]=(0,r.Z)(),{isMobileStyle:M}=(0,_.d)();function R(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Math.random()*(t-e)+e;return i?Math.floor(a):a}let F="M ".concat(6," 0 H ").concat(i-6," A ").concat(6," ").concat(6," 0 0 1 ").concat(i," ").concat(6," V ").concat(194," A ").concat(6," ").concat(6," 0 0 1 ").concat(i-6," ").concat(200," H ").concat(6," A ").concat(6," ").concat(6," 0 0 1 0 ").concat(194," V ").concat(6," A ").concat(6," ").concat(6," 0 0 1 ").concat(6," 0 Z"),W=[y.uj,Z.Tz,I.mU,h.faCamera,x.FV,S.uw,U.N6,p.b7,j.Vn,c.Qk,C.dd,g.th,D.Z1,T.OV,d.Xq,u.tf,L.rq,k.rj,w.j4,N.dC,l.qH,b.Uv,v.Po,m.BD,o.$3,A.Ug,f.l5],H=(0,s.useMemo)(()=>Array.from({length:35}).map((e,t)=>(0,a.jsx)(O.E.div,{initial:{opacity:.05,scale:.8},animate:{opacity:.2,scale:1},transition:{duration:2,repeat:1/0,repeatType:"mirror",delay:R(0,3,!1)},children:(0,a.jsx)(G.Z,{color:"light",children:(0,a.jsx)(n.G,{size:"2x",fixedWidth:!0,icon:W[R(0,W.length,!0)]})})},t)),[]);return(0,a.jsxs)(P.ZP,{ref:t,className:E()(M?"h-[100px]":"h-[200px]","relative mb-sm w-auto overflow-hidden rounded-md shadow-sm animate-in fade-in duration-300"),variant:"offset",children:[(0,a.jsx)("div",{className:"absolute -left-[12px] -top-[12px] flex w-[350px] flex-wrap gap-md",children:H}),(0,a.jsx)("svg",{className:"absolute inset-0 ",width:i,height:200,children:(0,a.jsx)(O.E.path,{d:F,className:"stroke-super dark:stroke-superDark",fill:"transparent",strokeWidth:"4",initial:{pathLength:0,opacity:.2},animate:{pathLength:1,opacity:.5},transition:{duration:3,repeat:1/0,repeatType:"mirror"}})}),(0,a.jsx)("svg",{className:"absolute inset-0 ",width:i,height:200,children:(0,a.jsx)(O.E.path,{d:F,className:"stroke-super dark:stroke-superDark",fill:"transparent",strokeWidth:"4",initial:{pathLength:0,opacity:.2},animate:{pathLength:1,opacity:.5},transition:{duration:3,repeat:1/0,repeatType:"mirror",delay:1.5}})}),(0,a.jsx)("svg",{className:"absolute inset-0 ",width:i,height:200,children:(0,a.jsx)(O.E.path,{d:F,className:"stroke-super dark:stroke-superDark",fill:"transparent",strokeWidth:"4",initial:{pathLength:1,opacity:.2},animate:{pathLength:0,opacity:.5},transition:{duration:3,repeat:1/0,repeatType:"mirror",delay:3}})})]})}},51398:function(e,t,i){i.d(t,{T:function(){return r}});var a=i(97458),n=i(40853),s=i(60971);let r=e=>{let{text:t,icon:i}=e;return(0,a.jsxs)("div",{className:"absolute bottom-xs right-xs flex items-center gap-x-xs rounded-md bg-black p-xs",children:[(0,a.jsx)(s.Z,{variant:"tiny",color:"white",children:t}),(0,a.jsx)(s.Z,{variant:"tiny",color:"white",children:(0,a.jsx)(n.G,{icon:i,fixedWidth:!0})})]})}},11008:function(e,t,i){var a=i(97458),n=i(92497);t.Z=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsx)(n.Z,{noLines:!0,size:"large"})}),(0,a.jsx)("div",{children:(0,a.jsx)(n.Z,{noLines:!0,size:"large"})}),(0,a.jsx)("div",{children:(0,a.jsx)(n.Z,{noLines:!0,size:"large"})}),(0,a.jsx)("div",{children:(0,a.jsx)(n.Z,{noLines:!0,size:"large"})})]})},34990:function(e,t,i){i.d(t,{Z:function(){return P}});var a,n,s=i(97458),r=i(52983),l=i(71485),o=i(56047),c=i(79650),d=i(1537),u=i(93040),m=i(67853),h=i(92087),x=i(62013),g=i(92497),p=i(98882),f=i(15065);let j=e=>{let{entry:t,imageGenSubject:i,setImageGenSubject:a,onSubmit:n}=e,{isMobileStyle:o,isMobileUserAgent:c}=(0,x.d)(),[d,u]=(0,r.useState)(!1),[m,j]=(0,r.useState)(""),[v,y]=(0,r.useState)(i),b=(0,l.useTranslations)("threads.entry.generateImage"),{getImageGenSubject:k}=(0,h.G)({frontendContextUUID:t.frontendContextUUID}),w=m+". The subject is:\n"+v,N=0===m.length||0===v.length||m.length>150||v.length>500;return(0,r.useEffect)(()=>{""===i&&(async()=>{u(!0);let e=await k({entryUUID:t.entryUUID});a(e),y(e),u(!1)})()},[i,k,t.entryUUID,a]),d?(0,s.jsx)(g.Z,{}):(0,s.jsxs)("div",{children:[(0,s.jsx)(p.Z,{className:"mb-sm",isMobileUserAgent:c,isMobileStyle:o,onChange:e=>j(e.target.value),value:m,label:b("style"),placeholder:b("stylePlaceholder"),maxLength:150}),(0,s.jsx)(p.Z,{isMobileUserAgent:c,isMobileStyle:o,onChange:e=>y(e.target.value),label:b("subject"),value:v,maxLength:500}),(0,s.jsx)("div",{className:"row mt-md flex",children:(0,s.jsx)(f.Z,{text:b("submit"),disabled:N,variant:"primary",onClick:()=>n(w)})})]})};var v=i(40853),y=i(10107),b=i(60971);(a=n||(n={})).PAINTING="PAINTING",a.PHOTOGRAPH="PHOTOGRAPH",a.ILLUSTRATION="ILLUSTRATION",a.DIAGRAM="DIAGRAM";let k=e=>{let{icon:t,text:i,onClick:a}=e;return(0,s.jsxs)(y.ZP,{variant:"offset",bgHover:"offsetPlus",className:"flex aspect-video cursor-pointer flex-col items-center justify-center rounded border",onClick:a,children:[(0,s.jsx)(b.Z,{variant:"section-title",children:(0,s.jsx)(v.G,{icon:t})}),(0,s.jsx)(b.Z,{variant:"smallBold",children:i})]})};var w=i(44340),N=i(2927),I=i(18364),U=i(849),Z=i(77272),S=i(44674),A=i(7811),C=i(48121),T=i(21850),L=i(3216),D=i(38348),_=i(58901),G=i(96847),P=e=>{let{userCreateLimit:t,onGenerateClick:i,isDisabled:a,entry:h,btnText:g}=e,[p,f]=(0,r.useState)(!1),[v,b]=(0,r.useState)(!1),[P,M]=(0,r.useState)(""),[E,O]=(0,r.useState)(""),{openModal:R}=(0,u.X)(),F=(0,d.lG)(),W=(0,c.W)(),{isMobileStyle:H,isMobileUserAgent:z}=(0,x.d)(),{trackEvent:q}=(0,o.WS)(),V=(0,l.useTranslations)("threads.entry.generateImage"),X=W&&0===t,Q=W&&t<10,$=Z.mU;W?X&&($=U.by):$=C.D$N;let B=e=>{b(!1),q("generate image style clicked",{entryUUID:h.entryUUID,style:e}),i({style:e,customInstructions:null,onFailure:e=>M(e)})},Y=(0,r.useCallback)(()=>{F?W?b(!0):R("pricingModal",{redirectUrl:"",pitchMessage:{title:V("title",{pro:"Pro"}),description:V("pitch")},origin:T.FM.GENERATE_IMAGE}):R("loginModal",{origin:T.FM.GENERATE_IMAGE}),q("generate image button clicked",{entryUUID:h.entryUUID,queryStr:h.entryTitle})},[h.entryTitle,h.entryUUID,F,W,R,V,q]);return""!==P?(0,s.jsx)(L.Z,{isMobileStyle:H,message:P,icon:C.qA6}):(0,s.jsx)(D.p,{isMobileStyle:H,isOpen:v,onClose:()=>{b(!1),f(!1)},content:(0,s.jsxs)("div",{className:"space-y-md p-sm",children:[(0,s.jsx)(_.Z,{title:p?V("customPrompt"):V("chooseStyle"),variant:"section",isMobileStyle:H,actionList:[{icon:A.kl,tooltipLayout:"right",tooltip:V("customPrompt"),pill:!0,visible:!0,variant:p?"primary":"common",onClick:()=>f(!p)}]}),!p&&(0,s.jsxs)(y.ZP,{className:"grid grid-cols-2 gap-sm",children:[(0,s.jsx)(k,{icon:w.TX,onClick:()=>B(n.PAINTING),text:V("painting")}),(0,s.jsx)(k,{icon:N.QY,onClick:()=>B(n.PHOTOGRAPH),text:V("photograph")}),(0,s.jsx)(k,{icon:S.Tz,onClick:()=>B(n.ILLUSTRATION),text:V("illustration")}),(0,s.jsx)(k,{icon:I.$U,onClick:()=>B(n.DIAGRAM),text:V("diagram")})]}),p&&(0,s.jsx)(j,{entry:h,imageGenSubject:E,setImageGenSubject:O,onSubmit:e=>{b(!1),f(!1),i({style:"custom",customInstructions:e,onFailure:e=>M(e)}),q("click image gen custom prompt submit",{prompt:e})}})]}),children:(0,s.jsx)(G.Z,{isMobileUserAgent:z,tooltipText:V("tooltip",{remaining:t}),tooltipLayout:"bottom",showTooltip:Q,asChild:!0,children:(0,s.jsx)(m.Z,{text:g,subtitle:X?V("limitReached"):void 0,disabled:X||a,icon:$,hideOnClick:!1,onClick:Y},"imageGenerate")})})}},67853:function(e,t,i){var a=i(97458),n=i(40853),s=i(52983),r=i(80937),l=i(10107),o=i(60971),c=i(51865),d=i.n(c);let u=s.forwardRef((e,t)=>{let{icon:i,text:c,subtitle:u,onClick:m,hideOnClick:h=!0,disabled:x=!1,...g}=e,[p,f]=(0,s.useState)(!0);return p?(0,a.jsx)(l.ZP,{bgHover:x?void 0:"offset",className:d()("mb-sm w-full select-none  rounded-md border border-dashed px-md py-sm",{"cursor-pointer":!x,"opacity-75":x}),onClick:()=>{!x&&m&&m(),!x&&h&&f(!1)},ref:t,...g,children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-sm",children:[(0,a.jsxs)(o.Z,{variant:"smallBold",className:"flex items-center gap-x-sm",children:[(0,a.jsx)(n.G,{fixedWidth:!0,icon:i}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:c}),u&&(0,a.jsx)(o.Z,{variant:"tiny",color:"light",children:u})]})]}),(0,a.jsx)(o.Z,{color:"super",children:(0,a.jsx)(n.G,{fixedWidth:!0,icon:r.r8})})]})}):null});t.Z=u},75029:function(e,t,i){var a=i(97458),n=i(52983),s=i(71485),r=i(92087),l=i(34990),o=i(67853),c=i(70720),d=i(64011),u=i(62013),m=i(3216);t.Z=e=>{let{entry:t,imagesLength:i,videosLength:h,createLimit:x,isDisabled:g,setIsLoadingGeneratedImage:p,setIsLoadingMediaItems:f}=e,[j,v]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!1),{isMobileStyle:k}=(0,u.d)(),{entryUUID:w,entryTitle:N,frontendContextUUID:I}=t,{onGenerateImageClick:U,onSearchForImages:Z,onSearchForVideos:S}=(0,r.G)({frontendContextUUID:t.frontendContextUUID}),A=(0,s.useTranslations)("threadAccessory");return(0,a.jsxs)("div",{children:[i<2&&(j?(0,a.jsx)("div",{className:"mb-sm",children:(0,a.jsx)(m.Z,{isMobileStyle:k,message:A("noImagesFound")})}):(0,a.jsx)(o.Z,{text:A("searchImages"),onClick:()=>Z({entry:t,setIsLoadingMediaItems:f,setNoImagesFound:v}),disabled:g,icon:d.l9},"imageSearch")),h<2&&(y?(0,a.jsx)("div",{className:"mb-sm",children:(0,a.jsx)(m.Z,{isMobileStyle:k,message:A("noVideosFound")})}):(0,a.jsx)(o.Z,{text:A("searchVideos"),onClick:()=>S({entry:t,setIsLoadingMediaItems:f,setNoVideosFound:b}),disabled:g,icon:c.Cj},"videoSearch")),(0,a.jsx)(l.Z,{btnText:A("generateImage"),userCreateLimit:x,entry:{entryUUID:w,entryTitle:N,frontendContextUUID:I},isDisabled:g,onGenerateClick:e=>{let{style:i,customInstructions:a,onFailure:n}=e;return U({entryUUID:t.entryUUID,imageStyle:i,customInstructions:a,setIsLoadingGeneratedImage:p,onSuccessCallback:()=>p(!1),onFailureCallback:e=>n(e)})}})]})}},10017:function(e,t,i){i.d(t,{s:function(){return d}});var a=i(97458),n=i(52983),s=i(51398),r=i(43155),l=i(74979),o=i(10107),c=i(49674);let d=e=>{let{url:t,thumbnail:i,title:d}=e,u=(0,l.k8)(t),[m,h]=(0,n.useState)(!1);return void 0===u?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.ZP,{onClick:()=>{h(!0)},className:"group relative aspect-video w-full cursor-pointer overflow-hidden rounded-md shadow-md transition-all duration-200 ease-in-out hover:scale-[1.02] hover:shadow-lg",children:[(0,a.jsx)(s.T,{text:"Watch",icon:r.aQ}),(0,a.jsx)("img",{alt:"Video Preview",className:"h-full w-full rounded-md object-cover",src:null!=i?i:"https://img.youtube.com/vi/".concat(u,"/hqdefault.jpg")})]}),(0,a.jsx)(c.u,{name:d,url:t,isOpen:m,setisOpen:h})]})}},89366:function(e,t,i){var a,n;i.d(t,{C:function(){return r},D:function(){return s}}),(n=a||(a={})).DEFAULT="default",n.SDXL="sdxl",n.DALLE3="dall-e-3",n.PLAYGROUND="playground";let s=e=>{switch(e){case"sdxl":return"SDXL";case"dall-e-3":return"DALL-E 3";case"playground":return"Playground";default:return"AI"}},r=e=>"dalle"===e||Object.values(a).includes(e)},92087:function(e,t,i){i.d(t,{G:function(){return h}});var a=i(78931),n=i(52983),s=i(25617),r=i(93040),l=i(54007),o=i(65712),c=i(56047),d=i(21850),u=i(85466),m=i.n(u);let h=e=>{let{frontendContextUUID:t}=e,i=(0,s.nO)(),{threadMetadata:u}=(0,l.a0)(),{openModal:h}=(0,r.X)(),{decrementCreateLimit:x}=(0,o.h)(),g=(0,a.NL)(),{trackEvent:p}=(0,c.WS)(),f=(0,n.useCallback)(async e=>{let{entryUUID:a,socketEndpoint:n}=e;i||console.error("Socket is null");let{status:s,media_items:r}=await i.emitWithAck(n,a,{read_write_token:null==u?void 0:u.rwToken});return"failed"!==s&&a&&g.setQueryData(["results",{frontend_context_uuid:t}],e=>{if(e)return e.map(e=>e.backend_uuid===a?{...e,media_items:r}:e)}),{status:s,media_items:r}},[t,g,i,null==u?void 0:u.rwToken]),j=(0,n.useCallback)(async e=>{let{entryUUID:t}=e;if(!i){console.error("Socket is null");return}let{status:a,error_code:n,subject:s}=await i.emitWithAck("get_image_gen_subject",t,{read_write_token:null==u?void 0:u.rwToken});return"failed"!==a?s:""},[i,null==u?void 0:u.rwToken]);return{onGenerateImageClick:(0,n.useCallback)(async e=>{let{entryUUID:a,imageStyle:n,customInstructions:s=null,setIsLoadingGeneratedImage:r,onSuccessCallback:l,onFailureCallback:o}=e;if(!i){console.error("Socket is null");return}r(!0);let{status:c,error_code:m,media_items:p}=await i.emitWithAck("create_image_for_entry",a,{image_style:n,custom_instructions:s,read_write_token:null==u?void 0:u.rwToken});"failed"===c?"PRO_ONLY"===m?h("pricingModal",{redirectUrl:"",pitchMessage:{title:"Generate DALL-E images with Pro",description:"Upgrade to Pro to generate DALL-E images"},origin:d.FM.GENERATE_IMAGE}):o("MODERATION"===m?"Failed due to moderation. Please try a different query":"Something is wrong with image generation. Please try later."):a&&(g.setQueryData(["results",{frontend_context_uuid:t}],e=>{if(e)return e.map(e=>e.backend_uuid===a?{...e,media_items:p}:e)}),x()),l()},[x,t,h,g,i,null==u?void 0:u.rwToken]),getImageGenSubject:j,onSearchForVideos:(0,n.useCallback)(async e=>{let{entry:t,setIsLoadingMediaItems:i,setNoVideosFound:a}=e,{entryUUID:n,entryTitle:s,mediaItems:r}=t;p("search for videos button clicked",{entryUUID:n,queryStr:s}),i(!0);try{let e=await f({entryUUID:n,socketEndpoint:"search_videos_for_entry"});("failed"===e.status||m()(e.media_items,r))&&a(!0)}catch(e){console.error("Error searching for videos:",e)}finally{i(!1)}},[f,p]),onSearchForImages:(0,n.useCallback)(async e=>{let{entry:t,setIsLoadingMediaItems:i,setNoImagesFound:a}=e,{entryUUID:n,entryTitle:s,mediaItems:r}=t;p("search for images button clicked",{entryUUID:n,queryStr:s}),i(!0);try{let e=await f({entryUUID:n,socketEndpoint:"search_images_for_entry"});("failed"===e.status||m()(e.media_items,r))&&a(!0)}catch(e){console.error("Error searching for images:",e)}finally{i(!1)}},[f,p])}}},58901:function(e,t,i){var a=i(97458),n=i(40853),s=i(51865),r=i.n(s),l=i(52983),o=i(10107),c=i(60971),d=i(15065),u=i(22055),m=i(21850);t.Z=e=>{let{title:t,icon:i,subtitle:s,actionList:h,search:x,variant:g="page",noBorder:p=!1,center:f="md",background:j="background",testId:v,isMobileStyle:y}=e,b=h&&h.length>0&&(0,a.jsx)("div",{className:"gap-x-sm flex",children:null==h?void 0:h.map((e,t)=>{var i,n;return e.visible?e.items&&e.items.length>0?(0,a.jsx)(u.G,{isMobileStyle:y,items:e.items,children:(0,a.jsx)(d.Z,{testId:v,size:m.$u.small,text:e.text,variant:e.variant,icon:e.icon,onClick:e.onClick,debounce:e.debounce})},null!==(i=e.text)&&void 0!==i?i:t):(0,a.jsx)("div",{className:"relative flex h-full items-center",children:(0,a.jsx)(d.Z,{testId:v,size:m.$u.small,text:e.text,variant:e.variant,icon:e.icon,onClick:e.onClick,toolTip:e.tooltip,tooltipLayout:"bottom",disabled:e.disabled,debounce:e.debounce})},null!==(n=e.text)&&void 0!==n?n:t):(0,a.jsx)(l.Fragment,{},t)})}),k=(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"gap-x-sm flex items-center ",children:[i&&(0,a.jsx)(c.Z,{variant:"page"===g?"page-title":"section-title",children:(0,a.jsx)(n.G,{fixedWidth:!0,icon:i})}),(0,a.jsx)(c.Z,{variant:"page"===g?"page-title":"section-title",children:t})]}),s&&(0,a.jsx)(c.Z,{variant:"page"===g?"base":"small",color:"light",className:"mt-sm",children:s})]});return(0,a.jsx)(o.ZP,{variant:j,className:r()({"sticky  top-0  z-[5] rounded-t-xl":"page"==g,"border-b":!p}),children:(0,a.jsx)(o.ZP,{className:r()({"pt-md md:pt-lg ":"page"==g,"px-sm md:px-lg mx-auto max-w-screen-md ":"page"==g&&"md"===f,"max-w-threadWidth px-md  md:px-lg mx-auto ":"page"==g&&"lg"===f}),children:(0,a.jsxs)(o.ZP,{variant:j,className:r()("gap-md flex flex-col md:flex-row md:items-center md:justify-between ",{"pb-md md:pb-lg":"page"===g,"h-14":!x&&"section"===g}),children:[(0,a.jsxs)("div",{className:"md:hidden",children:[(0,a.jsxs)("div",{className:"gap-sm flex justify-between ",children:[k,b]}),x&&(0,a.jsx)("div",{className:"mt-md w-full max-w-md",children:x})]}),(0,a.jsxs)("div",{className:"gap-sm hidden grow items-center justify-between md:flex",children:[k,(0,a.jsxs)("div",{className:"gap-sm flex grow items-center justify-end",children:[b,x&&(0,a.jsx)("div",{className:"max-w-md grow",children:x})]})]})]})})})}}}]);