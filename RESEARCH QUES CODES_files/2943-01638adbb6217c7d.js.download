"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2943,8509],{55612:function(e,t,n){n.d(t,{A:function(){return r},T:function(){return o}});var s=n(97458),a=n(52983),l=n(46696);let i=(0,a.createContext)({result:null,steps:null,isPending:!1,mediaItems:[],response:null,isFailed:!1,isReadonly:!1,inFlight:!1,idx:null,isCopilot:!1,filteredMediaItems:[],isLastResult:!1,isFirstResult:!1,hasAnswer:!1,hasSteps:!1,isFinalStep:!1,isSnapshotRender:!1}),r=e=>{let{children:t,result:n,response:r,isReadonly:o,idx:c,inFlight:u,isPending:d,hasSteps:m,isFinalStep:h,isCopilot:p,mediaItems:x,filteredMediaItems:v,isFailed:f,isSnapshotRender:k,isLastResult:b}=e,j=(0,a.useMemo)(()=>n?(0,l.cW)(n):[],[n]),y=!!(null==r?void 0:r.answer);return(0,s.jsx)(i.Provider,{value:{isPending:d,hasSteps:m,isFinalStep:h,isCopilot:p,mediaItems:x,filteredMediaItems:v,isFailed:f,steps:j,result:n,response:r,isReadonly:o,inFlight:u,idx:c,hasAnswer:y,isSnapshotRender:k,isFirstResult:0===c,isLastResult:b},children:t})},o=()=>{let e=(0,a.useContext)(i);if(!e)throw Error("useThreadEntry must be used within ThreadEntryProvider");return e}},79743:function(e,t,n){n.d(t,{a:function(){return l}});var s=n(97458),a=n(10107);let l=()=>(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsxs)("div",{className:"flex gap-sm",children:[(0,s.jsx)(a.ZP,{variant:"offset",className:"h-[22px] w-[22px] rounded-full"}),(0,s.jsx)(a.ZP,{variant:"offset",className:"h-[22px] w-[80px] rounded-full"})]}),(0,s.jsx)(a.ZP,{variant:"offset",className:"mt-md h-[80px] rounded-md"})]})},43524:function(e,t,n){var s=n(97458),a=n(52983),l=n(33658),i=n(29658),r=n(46696),o=n(15065);t.Z=e=>{let{shareHref:t,hasMounted:n,isSharable:c}=e,{trackEvent:u}=(0,l.h)(),d=(0,a.useCallback)(()=>{navigator.clipboard.writeText(n?(0,r.RP)(decodeURIComponent(t)):""),u("click copy link button",{})},[t,n,u]);return c?(0,s.jsx)(o.Z,{clickFeedback:!0,size:"small",variant:"primary",onClick:d,toolTip:"Copy Link",tooltipLayout:"bottom",icon:i.nN}):null}},87358:function(e,t,n){var s=n(97458),a=n(52983),l=n(71485),i=n(43524),r=n(62013),o=n(11777),c=n(38348),u=n(15065);t.Z=e=>{let{isSharable:t,hasMounted:n,shareHref:d,EditorDropDownContent:m,icon:h,onClick:p}=e,{isMobileStyle:x}=(0,r.d)(),{isMacOS:v}=(0,o.Fy)(),[f,k]=(0,a.useState)(!1),b=(0,l.useTranslations)("shared"),j=(0,a.useCallback)(()=>{null==p||p(),k(e=>!e)},[p,k]),y=(0,a.useCallback)(e=>{(v?e.metaKey&&e.shiftKey&&"c"===e.key:e.ctrlKey&&e.shiftKey&&"c"===e.key)&&(e.preventDefault(),j())},[v,j]);return((0,a.useEffect)(()=>(document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}),[y]),n)?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex items-center gap-x-sm",children:[(0,s.jsx)(i.Z,{shareHref:d,hasMounted:n,isSharable:t}),(0,s.jsx)(c.p,{content:m,placement:"bottom-end",isMobileStyle:x,onClose:()=>k(!1),isOpen:f,children:(0,s.jsx)(u.Z,{onClick:j,variant:"primary",size:"small",text:b("share"),icon:h})})]})}):null}},99672:function(e,t,n){var s=n(97458),a=n(40853),l=n(52983),i=n(71485),r=n(33658),o=n(55524),c=n(91007),u=n(75421),d=n(44835),m=n(29658),h=n(46696),p=n(60971),x=n(15065);t.Z=e=>{let{descriptionText:t,shareHref:n,isSharable:v,hasMounted:f,icon:k}=e,b=encodeURIComponent(t),{trackEvent:j}=(0,r.h)(),y=(0,i.useTranslations)("socialShare"),C=(0,i.useTranslations)("shared"),g=(0,l.useMemo)(()=>"https://twitter.com/intent/tweet?text=".concat(b,"&url=").concat(n),[b,n]),w=(0,l.useMemo)(()=>"https://api.whatsapp.com/send?text=".concat(b,"%20").concat(n),[b,n]),N=(0,l.useMemo)(()=>"https://www.facebook.com/sharer/sharer.php?u=".concat(n,"&quote=").concat(b),[b,n]),Z=(0,l.useCallback)(()=>{navigator.clipboard.writeText(f?(0,h.RP)(decodeURIComponent(n)):""),j("click copy link button",{})},[n,f,j]),S=(0,l.useCallback)(()=>{var e;if(!(null===(e=navigator)||void 0===e?void 0:e.share)){window.open(g,"_blank");return}navigator.share({text:"".concat(t," ").concat(f?(0,h.RP)(decodeURIComponent(n)):""),title:"Perplexity AI"}),j("click mobile native share button",{})},[n,g,t,f,j]),E=[{text:"Twitter",icon:u.NC,target:"_blank",href:g,onClick:()=>j("click tweet button",{})},{text:y("copyLink"),clickFeedback:!0,icon:m.nN,onClick:Z},{text:"WhatsApp",icon:c.VH,target:"_blank",href:w,onClick:()=>j("click whatsapp button",{})},{text:"Facebook",icon:o.ne,target:"_blank",href:N,onClick:()=>j("click facebook button",{})}];return((0,l.useEffect)(()=>{f&&v&&Z()},[f,v,Z]),f&&v)?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mt-sm",children:(0,s.jsxs)(p.Z,{variant:"tiny",color:"super",children:[(0,s.jsx)(a.G,{icon:d.E9,className:"mr-xs"}),(0,s.jsx)("span",{children:y("linkCopied")})]})}),(0,s.jsxs)("div",{className:"hidden md:block",children:[(0,s.jsx)(p.Z,{variant:"baseSemi",className:"mb-sm mt-md",children:"Share"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-xs",children:E.map(e=>(0,s.jsx)("div",{children:(0,s.jsx)(x.Z,{layout:"left",size:"small",fullWidth:!0,...e})},e.text))})]}),(0,s.jsx)("div",{className:"block md:hidden",children:(0,s.jsx)("div",{className:"mt-md",children:(0,s.jsx)(x.Z,{variant:"primary",fullWidth:!0,text:C("share"),target:"_blank",icon:k,onClick:S})})})]}):null}},79877:function(e,t,n){var s=n(97458),a=n(82129),l=n(68493),i=n(52983),r=n(71485),o=n(56934),c=n(50882),u=n(62013),d=n(66833),m=n(15065),h=n(60971),p=n(10107),x=n(45201);t.Z=e=>{var t,n,v;let{showAvatar:f,showCreatorLabel:k,showEdit:b,isCurrentUser:j=!0,textColor:y,textVariant:C="smallBold",username:g,image:w,anon:N}=e,{data:Z,update:S}=(0,l.useSession)(),[E,T]=i.useState(!1),[P,R]=i.useState(null!=g?g:j?null==Z?void 0:null===(t=Z.user)||void 0===t?void 0:t.username:"Anonymous"),[_,F]=i.useState(),{isMobileUserAgent:A}=(0,u.d)(),M=(0,r.useTranslations)("settings.account"),z=async()=>fetch("/api/user",{method:"PUT",body:JSON.stringify({username:P})}),{mutate:I,isLoading:U}=(0,a.D)(z,{onSuccess:e=>{e.json().then(t=>{if(200!==e.status){F(t.message);return}T(!1),F(void 0),S()})}});(0,i.useEffect)(()=>{var e;R(null!=g?g:j?null==Z?void 0:null===(e=Z.user)||void 0===e?void 0:e.username:"Anonymous")},[g,j,null==Z?void 0:null===(n=Z.user)||void 0===n?void 0:n.username]);let L="@perplexity-bot@"===P;return(0,s.jsxs)("div",{className:"relative flex items-center gap-x-xs",children:[f&&(0,s.jsx)(o.Z,{size:"small",anon:N,user:L?"/static/images/bot.png":null!=w?w:j&&null!==(v=null==Z?void 0:Z.user.image)&&void 0!==v?v:void 0}),E?(0,s.jsx)("div",{children:(0,s.jsx)(d.Z,{isMobileUserAgent:A,value:P,disabled:U,errorText:null!=_?_:""===P?"Username cannot be empty":"",onChange:e=>{R(e.target.value)},className:"md:min-w-[300px]",inlineEditBlock:Z&&(0,s.jsxs)("div",{className:"ml-sm flex items-center gap-x-xs",children:[(0,s.jsx)(m.Z,{text:M("save"),variant:P===Z.user.username||""===P||U?"common":"primary",size:"small",disabled:P===Z.user.username||""===P||U,onClick:()=>I()}),(0,s.jsx)(m.Z,{text:M("cancel"),size:"small",disabled:U,onClick:()=>{R(Z.user.username),T(!1)}})]})})}):(0,s.jsx)(h.Z,{variant:C,color:y,className:"break-all line-clamp-1",children:N?"Anonymous":L?"Perplexity Bot":P}),k&&(0,s.jsx)(p.ZP,{variant:"offset",className:"rounded-full px-sm py-xs",children:(0,s.jsx)(h.Z,{variant:"tiny",color:"light",children:"Author"})}),b&&!E&&(0,s.jsx)(x.Z,{pill:!0,size:"small",icon:c.faPenToSquare,onClick:()=>T(!0)})]})}},86863:function(e,t,n){var s=n(97458),a=n(52983);class l extends a.Component{static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.log({error:e,errorInfo:t})}render(){if(this.state.hasError){var e;return(null===(e=this.props)||void 0===e?void 0:e.fallback)?this.props.fallback:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Oops, there is an error!"}),(0,s.jsx)("button",{type:"button",onClick:()=>this.setState({hasError:!1}),children:"Try again?"})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1}}}t.Z=l},50578:function(e,t,n){n.d(t,{p:function(){return i}});var s=n(54007),a=n(82657),l=n(46532);function i(){let e=(0,l.f)(),{thread:t}=(0,s.a0)();return e?(0,a.$)(t):void 0}},90452:function(e,t,n){n.d(t,{O:function(){return l}});var s=n(52983),a=n(25617);function l(){let e=(0,a.nO)(),[t,n]=(0,s.useState)(!1);return(0,s.useCallback)((s,a,l,i)=>{e&&!t&&(n(!0),e.emit("update_thread_access",s,a,{read_write_token:l},e=>{n(!1),(null==e?void 0:e.access)!=null&&(null==i||i(null==e?void 0:e.access))}))},[t,e])}},53314:function(e,t,n){n.d(t,{X:function(){return a}});var s=n(82835);function a(){let{"pplx-show-survey":e}=(0,s.useRouter)().query;return"edu"===e||"plus"===e||"default"===e||"copilot"===e?e:null}}}]);